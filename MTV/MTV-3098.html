<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="keywords" content="migration, VMware, OpenShift Virtualization, KubeVirt, migrating, virtual machines, OpenShift, Red Hat Virtualization, RHV">
<title>Planning your migration to Red Hat OpenShift Virtualization</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body id="planning-{title}" class="article">
<div id="header">
<h1>Planning your migration to Red Hat OpenShift Virtualization</h1>
<div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#con_planning-intro_mtv">Planning a migration</a></li>
<li><a href="#assembly_cold-warm-migration_mtv">Cold and warm migration in MTV</a>
<ul class="sectlevel2">
<li><a href="#about-cold-warm-migration_mtv">About cold and warm migration</a>
<ul class="sectlevel3">
<li><a href="#cold-migration_mtv">Cold migration</a></li>
<li><a href="#warm-migration_mtv">Warm migration</a></li>
<li><a href="#_precopy_stage">Precopy stage</a></li>
<li><a href="#_cutover_stage">Cutover stage</a></li>
<li><a href="#mtv-cold-warm-migration_mtv">Warm migration precopy and cutover</a></li>
<li><a href="#warm-migration-versus-cold-migration">Advantages and disadvantages of cold and warm migrations</a></li>
<li><a href="#_conclusions">Conclusions</a></li>
</ul>
</li>
<li><a href="#mtv-migration-speed-comparison_mtv">Migration speed comparison</a></li>
</ul>
</li>
<li><a href="#assembly_prerequisites-for-migration_mtv">Prerequisites for migration</a>
<ul class="sectlevel2">
<li><a href="#mtv-software-requirements_mtv">Software requirements</a></li>
<li><a href="#about-storage_mtv">Storage support and default modes</a></li>
<li><a href="#network-prerequisites_mtv">Network prerequisites</a>
<ul class="sectlevel3">
<li><a href="#ports_mtv">Ports</a></li>
</ul>
</li>
<li><a href="#source-vm-prerequisites_mtv">Source virtual machine prerequisites</a></li>
<li><a href="#encryption-support_mtv">MTV encryption support</a></li>
<li><a href="#rhv-prerequisites_mtv">Red Hat Virtualization prerequisites</a></li>
<li><a href="#openstack-prerequisites_mtv">OpenStack prerequisites</a></li>
<li><a href="#additional-authentication-for-osp_mtv">Additional authentication methods for migrations with OpenStack source providers</a></li>
<li><a href="#openstack-token-authentication_ostack">Using token authentication with an OpenStack source provider</a></li>
<li><a href="#openstack-application-credential-authentication_ostack">Using application credential authentication with an OpenStack source provider</a></li>
<li><a href="#vmware-prerequisites_mtv">VMware prerequisites</a>
<ul class="sectlevel3">
<li><a href="#vmware-privileges_mtv">VMware privileges</a></li>
<li><a href="#creating-vmware-role-mtv-permissions_mtv">Creating a VMware role to grant MTV privileges</a></li>
<li><a href="#creating-vddk-image_mtv">Creating a VDDK image</a></li>
<li><a href="#increasing-nfc-memory-vmware-host_mtv">Increasing the NFC service memory of an ESXi host</a></li>
<li><a href="#vddk-validator-containers_mtv">VDDK validator containers need requests and limits</a></li>
</ul>
</li>
<li><a href="#ova-prerequisites_mtv">Open Virtual Appliance (OVA) prerequisites</a></li>
<li><a href="#cnv-prerequisites_mtv">OpenShift Virtualization prerequisites</a></li>
<li><a href="#compatibility-guidelines_mtv">Software compatibility guidelines</a>
<ul class="sectlevel3">
<li><a href="#openshift-operator-life-cycles">OpenShift Operator Life Cycles</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#assembly_installing-mtv-operator_mtv">Installing and configuring the MTV Operator</a>
<ul class="sectlevel2">
<li><a href="#installing-mtv-operator_web">Installing the MTV Operator by using the Red Hat OpenShift web console</a></li>
<li><a href="#installing-mtv-operator_cli">Installing the MTV Operator by using the command-line interface</a></li>
<li><a href="#configuring-mtv-operator_mtv">Configuring the MTV Operator</a></li>
<li><a href="#max-concurrent-vms_mtv">Configuring the controller_max_vm_inflight parameter</a></li>
</ul>
</li>
<li><a href="#assembly_migrating-vms-web-console_mtv">Migrating virtual machines by using the Red Hat OpenShift web console</a>
<ul class="sectlevel2">
<li><a href="#mtv-ui_mtv">The MTV user interface</a></li>
<li><a href="#mtv-overview-page_mtv">The MTV Overview page</a>
<ul class="sectlevel3">
<li><a href="#overview-tab_mtv">Overview tab</a></li>
<li><a href="#overview-yaml-tab_mtv">YAML tab</a></li>
<li><a href="#overview-health-tab_mtv">Health tab</a></li>
<li><a href="#overview-history-tab_mtv">History tab</a></li>
<li><a href="#overview-settings-tab_mtv">Settings tab</a></li>
</ul>
</li>
<li><a href="#_migrating_virtual_machines_by_using_the_mtv_user_interface">Migrating virtual machines by using the MTV user interface</a></li>
</ul>
</li>
<li><a href="#assembly_migrating-vms-cli_mtv">Migrating virtual machines by using the command-line interface</a>
<ul class="sectlevel2">
<li><a href="#non-admin-permissions_cli">Permissions needed by non-administrators to work with migration plan components</a></li>
</ul>
</li>
<li><a href="#assembly_mapping-networks-storage_mtv">Mapping networks and storage in migration plans</a>
<ul class="sectlevel2">
<li><a href="#about-network-maps_mtv">About network maps in migration plans</a></li>
<li><a href="#about-storage-maps_mtv">About storage maps in migration plans</a></li>
<li><a href="#_creating_ownerless_storage_maps_in_the_mtv_ui">Creating ownerless storage maps in the MTV UI</a></li>
</ul>
</li>
<li><a href="#assembly_planning-migration-vmware_mtv">Planning migration of virtual machines from VMware vSphere</a>
<ul class="sectlevel2">
<li><a href="#creating-yaml-based-network-maps-ui_vmware">Creating ownerless network maps in the MTV UI</a></li>
<li><a href="#creating-yaml-based-stoarge-maps-ui_vmware">Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</a></li>
<li><a href="#adding-source-provider_vmware">Adding a VMware vSphere source provider</a></li>
<li><a href="#selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</a></li>
<li><a href="#adding-source-provider_dest_vmware">Adding an OpenShift Virtualization destination provider</a></li>
<li><a href="#selecting-migration-network-for-virt-provider_dest_vmware">Selecting a migration network for an OpenShift Virtualization provider</a></li>
<li><a href="#creating-plan-wizard-290-vmware_vmware">Creating a VMware vSphere migration plan by using the MTV wizard</a></li>
<li><a href="#proc_enabling-nbde-with-clevis_vmware">Enabling Network-Bound Disk Encryption with Clevis</a></li>
</ul>
</li>
<li><a href="#assembly_planning-migration-rhv_mtv">Planning a migration of virtual machines from Red Hat Virtualization</a>
<ul class="sectlevel2">
<li><a href="#creating-yaml-based-network-maps-ui_rhv">Creating ownerless network maps in the MTV UI</a></li>
<li><a href="#creating-form-based-storage-maps-ui-ova_rhv">Creating ownerless storage maps using the form page of the MTV UI</a></li>
<li><a href="#creating-yaml-based-stoarge-maps-ui_rhv">Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</a></li>
<li><a href="#adding-source-provider_rhv">Adding a Red Hat Virtualization source provider</a></li>
<li><a href="#adding-source-provider_dest_rhv">Adding an OpenShift Virtualization destination provider</a></li>
<li><a href="#selecting-migration-network-for-virt-provider_dest_rhv">Selecting a migration network for an OpenShift Virtualization provider</a></li>
<li><a href="#creating-plan-wizard-290-rhv_rhv">Creating a Red Hat Virtualization migration plan by using the MTV wizard</a></li>
</ul>
</li>
<li><a href="#assembly_planning-migration-osp_mtv">Planning migration of virtual machines from OpenStack</a>
<ul class="sectlevel2">
<li><a href="#creating-yaml-based-network-maps-ui_ostack">Creating ownerless network maps in the MTV UI</a></li>
<li><a href="#creating-form-based-storage-maps-ui-ostack_ostack">Creating ownerless storage maps using the form page of the MTV UI</a></li>
<li><a href="#creating-yaml-based-stoarge-maps-ui_ostack">Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</a></li>
<li><a href="#adding-source-provider_ostack">Adding an OpenStack source provider</a></li>
<li><a href="#adding-source-provider_dest_ostack">Adding an OpenShift Virtualization destination provider</a></li>
<li><a href="#selecting-migration-network-for-virt-provider_dest_ostack">Selecting a migration network for an OpenShift Virtualization provider</a></li>
<li><a href="#creating-plan-wizard-290-ostack_ostack">Creating an OpenStack migration plan by using the MTV wizard</a></li>
</ul>
</li>
<li><a href="#assembly_planning-migration-ova_mtv">Planning a migration of virtual machines from OVA</a>
<ul class="sectlevel2">
<li><a href="#creating-yaml-based-network-maps-ui_ova">Creating ownerless network maps in the MTV UI</a></li>
<li><a href="#creating-form-based-storage-maps-ui-ova_ova">Creating ownerless storage maps using the form page of the MTV UI</a></li>
<li><a href="#creating-yaml-based-stoarge-maps-ui_ova">Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</a></li>
<li><a href="#adding-source-provider_ova">Adding an Open Virtual Appliance (OVA) source provider</a></li>
<li><a href="#adding-source-provider_dest_ova">Adding an OpenShift Virtualization destination provider</a></li>
<li><a href="#selecting-migration-network-for-virt-provider_dest_ova">Selecting a migration network for an OpenShift Virtualization provider</a></li>
<li><a href="#creating-plan-wizard-290-ova_ova">Creating an Open Virtualization Appliance (OVA) migration plan by using the MTV wizard</a></li>
</ul>
</li>
<li><a href="#assembly_planning-migration-cnv_mtv">Planning a migration of virtual machines from OpenShift Virtualization</a>
<ul class="sectlevel2">
<li><a href="#creating-yaml-based-network-maps-ui_cnv">Creating ownerless network maps in the MTV UI</a></li>
<li><a href="#creating-form-based-storage-maps-ui-cnv_cnv">Creating ownerless storage maps using the form page of the MTV UI</a></li>
<li><a href="#creating-yaml-based-stoarge-maps-ui_cnv">Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</a></li>
<li><a href="#adding-source-provider_cnv">Adding a Red Hat OpenShift Virtualization source provider</a></li>
<li><a href="#adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</a></li>
<li><a href="#selecting-migration-network-for-virt-provider_dest_cnv">Selecting a migration network for an OpenShift Virtualization provider</a></li>
<li><a href="#creating-plan-wizard-290-cnv_cnv">Creating an OpenShift Virtualization migration plan by using the MTV wizard</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="con_planning-intro_mtv">Planning a migration</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You can use the Migration Toolkit for Virtualization (MTV) to plan your migration of virtual machines from the
following source providers to OpenShift Virtualization destination providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>VMware vSphere</p>
</li>
<li>
<p>Red Hat Virtualization (RHV)</p>
</li>
<li>
<p>OpenStack</p>
</li>
<li>
<p>Open Virtual Appliances (OVAs) that were created by VMware vSphere</p>
</li>
<li>
<p>Remote OpenShift Virtualization clusters</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_cold-warm-migration_mtv">Cold and warm migration in MTV</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Cold migration is when a powered <strong><em>off</em></strong> virtual machine (VM) is migrated to a separate host. The VM is powered off, and there is no need for common shared storage.</p>
</div>
<div class="paragraph">
<p>Warm migration is when a powered <strong><em>on</em></strong> VM is migrated to a separate host. A source host state is cloned to the destination host.</p>
</div>
<div class="sect2">
<h3 id="about-cold-warm-migration_mtv">About cold and warm migration</h3>
<div class="paragraph _abstract">
<p>Migration Toolkit for Virtualization (MTV) supports cold and warm migration as follows:</p>
</div>
<div class="paragraph">
<p>MTV supports cold migration from the following source providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>VMware vSphere</p>
</li>
<li>
<p>Red Hat Virtualization (RHV)</p>
</li>
<li>
<p>OpenStack</p>
</li>
<li>
<p>Open Virtual Appliances (OVAs) that were created by VMware vSphere</p>
</li>
<li>
<p>Remote OpenShift Virtualization clusters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>MTV supports warm migration from the following source providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>VMware vSphere</p>
</li>
<li>
<p>Red Hat Virtualization</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="cold-migration_mtv">Cold migration</h4>
<div class="paragraph">
<p>Cold migration is the default migration type. The source virtual machines are shut down while the data is copied.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>VMware only: In cold migrations, in situations in which a package manager cannot be used during the migration, MTV does not install the <code>qemu-guest-agent</code> daemon on the migrated VMs. This has some impact on the functionality of the migrated VMs, but overall, they are still expected to function.</p>
</div>
<div class="paragraph">
<p>To enable MTV to automatically install <code>qemu-guest-agent</code> on the migrated VMs, ensure that your package manager can install the daemon during the first boot of the VM after migration.</p>
</div>
<div class="paragraph">
<p>If that is not possible, use your preferred automated or manual procedure to install <code>qemu-guest-agent</code> manually.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="warm-migration_mtv">Warm migration</h4>
<div class="paragraph">
<p>Most of the data is copied during the <em>precopy</em> stage while the source virtual machines (VMs) are running.</p>
</div>
<div class="paragraph">
<p>Then the VMs are shut down and the remaining data is copied during the <em>cutover</em> stage.</p>
</div>
</div>
<div class="sect3">
<h4 id="_precopy_stage">Precopy stage</h4>
<div class="paragraph">
<p>The VMs are not shut down during the precopy stage.</p>
</div>
<div class="paragraph">
<p>The VM disks are copied incrementally by using <a href="https://kb.vmware.com/s/article/1020128">changed block tracking (CBT)</a> snapshots. The snapshots are created at one-hour intervals by default. You can change the snapshot interval by updating the <code>forklift-controller</code> deployment.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must enable CBT for each source VM and each VM disk.</p>
</div>
<div class="paragraph">
<p>A VM can support up to 28 CBT snapshots. If the source VM has too many CBT snapshots and the <code>Migration Controller</code> service is not able to create a new snapshot, warm migration might fail. The <code>Migration Controller</code> service deletes each snapshot when the snapshot is no longer required.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The precopy stage runs until the cutover stage is started manually or is scheduled to start.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cutover_stage">Cutover stage</h4>
<div class="paragraph">
<p>The VMs are shut down during the cutover stage and the remaining data is migrated. Data stored in RAM is not migrated.</p>
</div>
<div class="paragraph">
<p>You can start the cutover stage manually by using the MTV console or you can schedule a cutover time in the <code>Migration</code> manifest.</p>
</div>
</div>
<div class="sect3">
<h4 id="mtv-cold-warm-migration_mtv">Warm migration precopy and cutover</h4>
<div class="paragraph">
<p>The following high-level steps describe the precopy and cutover stages of a warm migration.</p>
</div>
<div class="sect4">
<h5 id="_preparing_the_precopy_stage_for_a_warm_migration">Preparing the precopy stage for a warm migration</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an initial snapshot of running VM disks.</p>
</li>
<li>
<p>Copy first snapshot to target: full-disk transfer, the largest amount of data copied. It takes more time to complete.</p>
</li>
<li>
<p>Copy deltas: changed data, copying only data that has changed since the last snapshot was taken. It takes less time to complete.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create a new snapshot.</p>
</li>
<li>
<p>Copy the delta between the previous snapshot and the new snapshot.</p>
</li>
<li>
<p>Schedule the next snapshot, configurable by default, one hour after the last snapshot finished.</p>
</li>
</ol>
</div>
</li>
<li>
<p>An arbitrary number of deltas can be copied.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_preparing_the_cutover_stage_for_a_warm_migration">Preparing the cutover stage for a warm migration</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Scheduled time to finalize warm migration</p>
</li>
<li>
<p>Shut down the source VM.</p>
</li>
<li>
<p>Copy the final snapshot delta to the target.</p>
</li>
<li>
<p>Continue in the same way as cold migration</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Guest conversion</p>
</li>
<li>
<p>Starting target VM (optional)</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="warm-migration-versus-cold-migration">Advantages and disadvantages of cold and warm migrations</h4>
<div class="paragraph">
<p>The table that follows offers a more detailed description of the advantages and disadvantages of cold migration and warm migration. It assumes that you have installed Red Hat Enterprise Linux (RHEL) 9 on the Red Hat OpenShift platform on which you installed MTV:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Advantages and disadvantages of cold and warm migrations</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"><strong>Cold migration</strong></th>
<th class="tableblock halign-left valign-top"><strong>Warm migration</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Duration</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correlates to the amount of data on the disks. Each block is copied once.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correlates to the amount of data on the disks and VM utilization. Blocks may be copied multiple times.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fail fast</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert and then transfer. Each VM is converted to be compatible with OpenShift and, if the conversion is successful, the VM is transferred. If a VM cannot be converted, the migration fails immediately.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer and then convert. For each VM, MTV creates a snapshot and transfers it to Red Hat OpenShift. When you start the cutover, MTV creates the last snapshot, transfers it, and then converts the VM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tools</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>virt-v2v</code> (Red Hat Enterprise Linux 9), used to convert virtual machines from a foreign hypervisor to run on Kernel-based Virtual Machines (KVMs).</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Containerized Data Importer (CDI), a persistent storage management add-on, and <code>virt-v2v</code> (Red Hat Enterprise Linux 9)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Data transferred</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Approximate sum of all disks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Approximate sum of all disks and VM utilization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>VM downtime</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High: The VMs are shut down, and the disks are transferred.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low: Disks are transferred in the background. The VMs are shut down during the cutover stage, and the remaining data is migrated. Data stored in RAM is not migrated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Parallelism</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disks are transferred sequentially for each VM. For remote migration, disks are transferred in parallel.
<sup class="footnote" id="_footnote_footnote1">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disks are transferred in parallel by different pods.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection use</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keeps the connection to the Source only during the disk transfer.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keeps the connection to the Source during the disk transfer, but the connection is released between snapshots.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tools</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MTV only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MTV and CDI from OpenShift Virtualization.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The preceding table describes the situation for VMs that are running because the main benefit of warm migration is the reduced downtime, and there is no reason to initiate warm migration for VMs that are down. However, performing warm migration for VMs that are down is not the same as cold migration, even when MTV uses <code>virt-v2v</code> and RHEL 9. For VMs that are down, MTV transfers the disks using CDI, unlike in cold migration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When importing from VMware, there are additional factors which impact the migration speed such as limits related to ESXi, vSphere. or VDDK.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_conclusions">Conclusions</h4>
<div class="paragraph">
<p>Based on the preceding information, we can draw the following conclusions about cold migration vs. warm migration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The shortest downtime of VMs can be achieved by using warm migration.</p>
</li>
<li>
<p>The shortest duration for VMs with a large amount of data on a single disk can be achieved by using cold migration.</p>
</li>
<li>
<p>The shortest duration for VMs with a large amount of data that is spread evenly across multiple disks can be achieved by using warm migration.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mtv-migration-speed-comparison_mtv">Migration speed comparison</h3>
<div class="paragraph _abstract">
<p>Comparing the migration speeds of cold and warm migrations, you can observe that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The observed speeds for the warm migration single disk transfer and disk conversion are approximately the same as for the cold migration.</p>
</li>
<li>
<p>The benefit of warm migration is that the transfer of the snapshot happens in the background while the VM is powered <strong><em>on</em></strong>.</p>
</li>
<li>
<p>The default snapshot time is taken every 60 minutes. If VMs change substantially, more data needs to be transferred than in cold migration when the VM is powered <strong><em>off</em></strong>.</p>
</li>
<li>
<p>The cutover time, meaning the shutdown of the VM and last snapshot transfer, depends on how much the VM has changed since the last snapshot.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_prerequisites-for-migration_mtv">Prerequisites for migration</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Review the following prerequisites to ensure that your environment is prepared for migration.</p>
</div>
<div class="sect2">
<h3 id="mtv-software-requirements_mtv">Software requirements</h3>
<div class="paragraph">
<p>Migration Toolkit for Virtualization (MTV) has software requirements for all providers as well as specific software requirements per provider.</p>
</div>
<div class="paragraph">
<p>You must install <a href="#compatibility-guidelines_mtv">compatible versions</a> of Red Hat OpenShift and OpenShift Virtualization.</p>
</div>
</div>
<div class="sect2">
<h3 id="about-storage_mtv">Storage support and default modes</h3>
<div class="paragraph _abstract">
<p>Migration Toolkit for Virtualization (MTV) uses the following default volume and access modes for supported storage.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Default volume and access modes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Provisioner</th>
<th class="tableblock halign-left valign-top">Volume mode</th>
<th class="tableblock halign-left valign-top">Access mode</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes.io/aws-ebs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteOnce</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes.io/azure-disk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteOnce</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes.io/azure-file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteMany</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes.io/cinder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteOnce</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes.io/gce-pd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteOnce</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes.io/hostpath-provisioner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteOnce</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">manila.csi.openstack.org</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteMany</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">openshift-storage.cephfs.csi.ceph.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filesystem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteMany</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">openshift-storage.rbd.csi.ceph.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteOnce</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes.io/rbd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteOnce</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes.io/vsphere-volume</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadWriteOnce</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the OpenShift Virtualization storage does not support <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/storage/dynamic-provisioning">dynamic provisioning</a>, you must apply the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Filesystem</code> volume mode</p>
<div class="paragraph">
<p><code>Filesystem</code> volume mode is slower than <code>Block</code> volume mode.</p>
</div>
</li>
<li>
<p><code>ReadWriteOnce</code> access mode</p>
<div class="paragraph">
<p><code>ReadWriteOnce</code> access mode does not support live virtual machine migration.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/virtualization/virtual-machines#virt-customizing-storage-profile_virt-creating-data-volumes">Enabling a statically-provisioned storage class</a> for details on editing the storage profile.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If your migration uses block storage and persistent volumes created with an EXT4 file system, increase the file system overhead in the Containerized Data Importer (CDI) to be more than 10%. The default overhead that is assumed by CDI does not completely include the reserved place for the root partition. If you do not increase the file system overhead in CDI by this amount, your migration might fail.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you migrate from OpenStack, or when you run a cold migration from Red Hat Virtualization to the Red Hat OpenShift cluster that MTV is deployed on, the migration allocates persistent volumes without CDI. In these cases, you might need to adjust the file system overhead.</p>
</div>
<div class="paragraph">
<p>If the configured file system overhead, which has a default value of 10%, is too low, the disk transfer will fail due to lack of space. In such a case, you would want to increase the file system overhead.</p>
</div>
<div class="paragraph">
<p>In some cases, however, you might want to decrease the file system overhead to reduce storage consumption.</p>
</div>
<div class="paragraph">
<p>You can change the file system overhead by changing the value of the <code>controller_filesystem_overhead</code> in the <code>spec</code> portion of the <code>forklift-controller</code> CR, as described in <a href="#configuring-mtv-operator_mtv">Configuring the MTV Operator</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="network-prerequisites_mtv">Network prerequisites</h3>
<div class="paragraph _abstract">
<p>The following network prerequisites apply to all migrations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Do not change IP addresses, VLANs, and other network configuration settings during a migration. The MAC addresses of the virtual machines (VMs) are preserved during migration.</p>
</li>
<li>
<p>The network connections between the source environment, the OpenShift Virtualization cluster, and the replication repository must be reliable and uninterrupted.</p>
</li>
<li>
<p>If you are mapping more than one source and destination network, you must create a <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/virtualization/virtual-machines#virt-creating-network-attachment-definition">network attachment definition</a> for each additional destination network.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ports_mtv">Ports</h4>
<div class="paragraph">
<p>The firewalls must enable traffic over the following ports:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Network ports required for migrating from VMware vSphere</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 33.3336%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Source</th>
<th class="tableblock halign-left valign-top">Destination</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VMware vCenter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>VMware provider inventory</p>
</div>
<div class="paragraph">
<p>Disk transfer authentication</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VMware ESXi hosts</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Disk transfer authentication</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">902</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VMware ESXi hosts</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Disk transfer data copy</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Network ports required for migrating from Red Hat Virtualization</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 33.3336%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Source</th>
<th class="tableblock halign-left valign-top">Destination</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RHV Engine</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>RHV provider inventory</p>
</div>
<div class="paragraph">
<p>Disk transfer authentication</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">54322</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RHV hosts</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Disk transfer data copy</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Network ports required for migrating from OpenStack</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 33.3336%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Source</th>
<th class="tableblock halign-left valign-top">Destination</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8776</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cinder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenStack hosts</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Block storage API</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8774</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nova</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenStack hosts</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Virtualization API</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keystone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenStack hosts</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Authentication API</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9696</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Neutron</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenStack hosts</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Network API</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9292</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Glance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenStack hosts</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Image service API</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Network ports required for migrating from Open Virtual Appliance (OVA) files</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 33.3336%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Source</th>
<th class="tableblock halign-left valign-top">Destination</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2049</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server containing the OVA files</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>NFS service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">111</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP or UCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server containing the OVA files</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>RPC Portmapper, only needed for NFSv4.0</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Network ports required for migrating from OpenShift Virtualization</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 33.3336%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Source</th>
<th class="tableblock halign-left valign-top">Destination</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift Virtualization host</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Access API to get information from a VM&#8217;s manifest</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift Virtualization host</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Download VM data using the <code>virtualMachineExport</code> resource</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="source-vm-prerequisites_mtv">Source virtual machine prerequisites</h3>
<div class="paragraph _abstract">
<p>The following prerequisites for source virtual machines (VMs) apply to all migrations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ISO images and CD-ROMs are unmounted.</p>
</li>
<li>
<p>Each NIC contains either an IPv4 address or an IPv6 address, although a NIC may use both.</p>
</li>
<li>
<p>The operating system of each VM is certified and supported as a guest operating system for conversions.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can check that the operating system is supported by referring to the table in <a href="https://access.redhat.com/articles/1351473">Converting virtual machines from other hypervisors to KVM with virt-v2v</a>. See the columns of the table that refer to RHEL 8 hosts and RHEL 9 hosts.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>VMs that you want to migrate with MTV 2.6.<em>z</em> run on RHEL 8.</p>
</li>
<li>
<p>VMs that you want to migrate with MTV 2.7.<em>z</em> run on RHEL 9.</p>
</li>
<li>
<p>The name of a VM must not contain a period (<code>.</code>). Migration Toolkit for Virtualization (MTV) changes any period in a VM name to a dash (<code>-</code>).</p>
</li>
<li>
<p>The name of a VM must not be the same as any other VM in the OpenShift Virtualization environment.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>MTV has limited support for the migration of dual-boot operating system VMs.</p>
</div>
<div class="paragraph">
<p>In the case of a dual-boot operating system VM, MTV will try to convert the first boot disk it finds.
Alternatively the root device can be specified in the MTV UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For virtual machines (VMs) running Microsoft Windows, Volume Shadow Copy Service (VSS) inside the guest VM is used to quiesce the file system and applications. </p>
</div>
<div class="paragraph">
<p>When performing a warm migration of a Microsoft Windows virtual machine from VMware, you must start VSS on the Windows guest operating system in order for the snapshot and <code>Quiesce guest file system</code> to succeed.</p>
</div>
<div class="paragraph">
<p>If you do not start VSS on the Windows guest operating system, the snapshot creation during the Warm migration fails with the following error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">An error occurred while taking a snapshot: Failed to restart the virtual machine</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you set the VSS service to <code>Manual</code> and start a snapshot creation with <code>Quiesce guest file system = yes</code>. In the background, the VMware Snapshot provider service requests VSS to start the shadow copy.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Migration Toolkit for Virtualization automatically assigns a new name to a VM that does not comply with the rules.</p>
</div>
<div class="paragraph">
<p>Migration Toolkit for Virtualization makes the following changes when it automatically generates a new VM name:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Excluded characters are removed.</p>
</li>
<li>
<p>Uppercase letters are switched to lowercase letters.</p>
</li>
<li>
<p>Any underscore (<code>_</code>) is changed to a dash (<code>-</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This feature allows a migration to proceed smoothly even if someone enters a VM name that does not follow the rules.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Microsoft Windows VMs, which use the <a href="https://learn.microsoft.com/en-us/windows/compatibility/measured-boot">Measured Boot</a> feature, cannot be migrated. Measured Boot is a mechanism to prevent any kind of device changes by checking each start-up component, including the firmware, all the way to the boot driver.</p>
</div>
<div class="paragraph">
<p>The alternative to migration is to re-create the Windows VM directly on OpenShift Virtualization.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Virtual machines (VMs) with Secure Boot enabled currently might not be migrated automatically. This is because Secure Boot would prevent the VMs from booting on the destination provider. Secure boot is a security standard developed by members of the PC industry to ensure that a device boots using only software that is trusted by the Original Equipment Manufacturer (OEM). </p>
</div>
<div class="paragraph">
<p>Workaround: The current workaround is to disable Secure Boot on the destination. For more details, see <a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/disabling-secure-boot?view=windows-11">Disabling Secure Boot</a>. <a href="https://issues.redhat.com/browse/MTV-1548">(MTV-1548)</a></p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="encryption-support_mtv">MTV encryption support</h3>
<div class="paragraph _abstract">
<p>Migration Toolkit for Virtualization (MTV) supports the following types of encryption for virtual machines (VMs):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For VMs that run on Linux: Linux Unified Key Setup (LUKS)</p>
</li>
<li>
<p>For VMs that run on Windows: BitLocker</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="rhv-prerequisites_mtv">Red Hat Virtualization prerequisites</h3>
<div class="paragraph _abstract">
<p>The following prerequisites apply to Red Hat Virtualization migrations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To create a source provider, you must have at least the <code>UserRole</code> and <code>ReadOnlyAdmin</code> roles assigned to you. These are the minimum required permissions, however, any other administrator or superuser permissions will also work.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must keep the <code>UserRole</code> and <code>ReadOnlyAdmin</code> roles until the virtual machines of the source provider have been migrated. Otherwise, the migration will fail.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>To migrate virtual machines:</p>
<div class="ulist">
<ul>
<li>
<p>You must have one of the following:</p>
<div class="ulist">
<ul>
<li>
<p>RHV admin permissions. These permissions allow you to migrate any virtual machine in the system.</p>
</li>
<li>
<p><code>DiskCreator</code> and <code>UserVmManager</code> permissions on every virtual machine you want to migrate.</p>
</li>
</ul>
</div>
</li>
<li>
<p>You must use a <a href="#compatibility-guidelines_mtv">compatible version</a> of Red Hat Virtualization.</p>
</li>
<li>
<p>You must have the Manager CA certificate, unless it was replaced by a third-party certificate, in which case, specify the Manager Apache CA certificate.</p>
<div class="paragraph">
<p>You can obtain the Manager CA certificate by navigating to <a href="https://&lt;engine_host&gt;/ovirt-engine/services/pki-resource?resource=ca-certificate&amp;format=X509-PEM-CA" class="bare">https://&lt;engine_host&gt;/ovirt-engine/services/pki-resource?resource=ca-certificate&amp;format=X509-PEM-CA</a> in a browser.</p>
</div>
</li>
<li>
<p>If you are migrating a virtual machine with a direct logical unit number (LUN) disk, ensure that the nodes in the OpenShift Virtualization destination cluster that the VM is expected to run on can access the backend storage.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Unlike disk images that <em>are copied</em> from a source provider to a target provider, LUNs are <em>detached</em>, <em>but not removed</em>, from virtual machines in the source provider and then attached to the virtual machines (VMs) that are created in the target provider.</p>
</li>
<li>
<p>LUNs are not removed from the source provider during the migration in case fallback to the source provider is required. However, before re-attaching the LUNs to VMs in the source provider, ensure that the LUNs are not used by VMs on the target environment at the same time, which might lead to data corruption.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="openstack-prerequisites_mtv">OpenStack prerequisites</h3>
<div class="paragraph _abstract">
<p>The following prerequisites apply to OpenStack migrations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must use a <a href="#compatibility-guidelines_mtv">compatible version</a> of OpenStack.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="additional-authentication-for-osp_mtv">Additional authentication methods for migrations with OpenStack source providers</h3>
<div class="paragraph">
<p>MTV versions 2.6 and later support the following authentication methods for migrations with OpenStack source providers in addition to the standard username and password credential set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Token authentication</p>
</li>
<li>
<p>Application credential authentication</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use these methods to migrate virtual machines with OpenStack source providers using the command-line interface (CLI) the same way you migrate other virtual machines, except for how you prepare the <code>Secret</code> manifest.</p>
</div>
</div>
<div class="sect2">
<h3 id="openstack-token-authentication_ostack">Using token authentication with an OpenStack source provider</h3>
<div class="paragraph _abstract">
<p>You can use token authentication, instead of username and password authentication, when you create an OpenStack source provider.</p>
</div>
<div class="paragraph">
<p>MTV supports both of the following types of token authentication:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Token with user ID</p>
</li>
<li>
<p>Token with user name</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each type of token authentication, you need to use data from OpenStack to create a <code>Secret</code> manifest.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>Have an OpenStack account.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the dashboard of the OpenStack web console, click <strong>Project &gt; API Access</strong>.</p>
</li>
<li>
<p>Expand <strong>Download OpenStack RC file</strong> and click <strong>OpenStack RC file</strong>.</p>
<div class="paragraph">
<p>The file that is downloaded, referred to here as <code>&lt;openstack_rc_file&gt;</code>, includes the following fields used for token authentication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">OS_AUTH_URL
OS_PROJECT_ID
OS_PROJECT_NAME
OS_DOMAIN_NAME
OS_USERNAME</code></pre>
</div>
</div>
</li>
<li>
<p>To get the data needed for token authentication, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ openstack token issue</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output, referred to here as <code>&lt;openstack_token_output&gt;</code>, includes the <code>token</code>, <code>userID</code>, and <code>projectID</code> that you need for authentication using a token with user ID.</p>
</div>
</li>
<li>
<p>Create a <code>Secret</code> manifest similar to the following:</p>
<div class="ulist">
<ul>
<li>
<p>For authentication using a token with user ID:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-tokenid
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: token
  token: &lt;token_from_openstack_token_output&gt;
  projectID: &lt;projectID_from_openstack_token_output&gt;
  userID: &lt;userID_from_openstack_token_output&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</code></pre>
</div>
</div>
</li>
<li>
<p>For authentication using a token with user name:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-tokenname
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: token
  token: &lt;token_from_openstack_token_output&gt;
  domainName: &lt;OS_DOMAIN_NAME_from_openstack_rc_file&gt;
  projectName: &lt;OS_PROJECT_NAME_from_openstack_rc_file&gt;
  username: &lt;OS_USERNAME_from_openstack_rc_file&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="openstack-application-credential-authentication_ostack">Using application credential authentication with an OpenStack source provider</h3>
<div class="paragraph _abstract">
<p>You can use application credential authentication, instead of username and password authentication, when you create an OpenStack source provider.</p>
</div>
<div class="paragraph">
<p>MTV supports both of the following types of application credential authentication:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Application credential ID</p>
</li>
<li>
<p>Application credential name</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each type of application credential authentication, you need to use data from OpenStack to create a <code>Secret</code> manifest.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisites</div>
<p>You have an OpenStack account.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the dashboard of the OpenStack web console, click <strong>Project</strong> &gt; <strong>API Access</strong>.</p>
</li>
<li>
<p>Expand <strong>Download OpenStack RC file</strong> and click <strong>OpenStack RC file</strong>.</p>
<div class="paragraph">
<p>The file that is downloaded, referred to here as <code>&lt;openstack_rc_file&gt;</code>, includes the following fields used for application credential authentication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">OS_AUTH_URL
OS_PROJECT_ID
OS_PROJECT_NAME
OS_DOMAIN_NAME
OS_USERNAME</code></pre>
</div>
</div>
</li>
<li>
<p>To get the data needed for application credential authentication, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ openstack application credential create --role member --role reader --secret redhat forklift</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output, referred to here as <code>&lt;openstack_credential_output&gt;</code>, includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>id</code>  and <code>secret</code> that you need for authentication using an application credential ID</p>
</li>
<li>
<p>The <code>name</code> and <code>secret</code> that you need for authentication using an application credential name</p>
</li>
</ul>
</div>
</li>
<li>
<p>Create a <code>Secret</code> manifest similar to the following:</p>
<div class="ulist">
<ul>
<li>
<p>For authentication using the application credential ID:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-appid
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: applicationcredential
  applicationCredentialID: &lt;id_from_openstack_credential_output&gt;
  applicationCredentialSecret: &lt;secret_from_openstack_credential_output&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</code></pre>
</div>
</div>
</li>
<li>
<p>For authentication using the application credential name:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">cat &lt;&lt; EOF | oc apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: openstack-secret-appname
  namespace: openshift-mtv
  labels:
    createdForProviderType: openstack
type: Opaque
stringData:
  authType: applicationcredential
  applicationCredentialName: &lt;name_from_openstack_credential_output&gt;
  applicationCredentialSecret: &lt;secret_from_openstack_credential_output&gt;
  domainName: &lt;OS_DOMAIN_NAME_from_openstack_rc_file&gt;
  username: &lt;OS_USERNAME_from_openstack_rc_file&gt;
  url: &lt;OS_AUTH_URL_from_openstack_rc_file&gt;
EOF</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="vmware-prerequisites_mtv">VMware prerequisites</h3>
<div class="paragraph _abstract">
<p>It is strongly recommended to create a VDDK image to accelerate migrations. For more information, see <a href="#creating-vddk-image_mtv">Creating a VDDK image</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Virtual machine (VM) migrations do not work without VDDK when a VM is backed by VMware vSAN.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following prerequisites apply to VMware migrations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must use a <a href="#compatibility-guidelines_mtv">compatible version</a> of VMware vSphere.</p>
</li>
<li>
<p>You must be logged in as a user with at least the minimal set of <a href="#vmware-privileges_mtv">VMware privileges</a>.</p>
</li>
<li>
<p>To access the virtual machine using a pre-migration hook, <a href="https://www.vmware.com/support/ws5/doc/new_guest_tools_ws.html">VMware Tools</a> must be installed on the source virtual machine.</p>
</li>
<li>
<p>The VM operating system must be certified and supported for use as a <a href="https://access.redhat.com/articles/973163#ocpvirt">guest operating system with OpenShift Virtualization</a> <em>and</em> for <a href="https://access.redhat.com/articles/1351473">conversion to KVM with <code>virt-v2v</code></a>.</p>
</li>
<li>
<p>If you are running a warm migration, you must enable <a href="https://kb.vmware.com/s/article/1020128">changed block tracking (CBT)</a> on the VMs and on the VM disks.</p>
</li>
<li>
<p>If you are migrating more than 10 VMs from an ESXi host in the same migration plan, you must increase the Network File Copy (NFC) service memory of the host.</p>
</li>
<li>
<p>It is strongly recommended to disable hibernation because Migration Toolkit for Virtualization (MTV) does not support migrating hibernated VMs.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For virtual machines (VMs) running Microsoft Windows, Volume Shadow Copy Service (VSS) inside the guest VM is used to quiesce the file system and applications. </p>
</div>
<div class="paragraph">
<p>When performing a warm migration of a Microsoft Windows virtual machine from VMware, you must start VSS on the Windows guest operating system in order for the snapshot and <code>Quiesce guest file system</code> to succeed.</p>
</div>
<div class="paragraph">
<p>If you do not start VSS on the Windows guest operating system, the snapshot creation during the Warm migration fails with the following error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">An error occurred while taking a snapshot: Failed to restart the virtual machine</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you set the VSS service to <code>Manual</code> and start a snapshot creation with <code>Quiesce guest file system = yes</code>. In the background, the VMware Snapshot provider service requests VSS to start the shadow copy.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In case of a power outage, data might be lost for a VM with disabled hibernation. However, if hibernation is not disabled, migration will fail.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Neither MTV nor OpenShift Virtualization support conversion of Btrfs for migrating VMs from VMware.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="vmware-privileges_mtv">VMware privileges</h4>
<div class="paragraph">
<p>The following minimal set of VMware privileges is required to migrate virtual machines to OpenShift Virtualization with the Migration Toolkit for Virtualization (MTV).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. VMware privileges</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Privilege</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>Virtual machine.Interaction</code> privileges:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Interaction.Power Off</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows powering off a powered-on virtual machine. This operation powers down the guest operating system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Interaction.Power On</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows powering on a powered-off virtual machine and resuming a suspended virtual machine.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Guest operating system management by VIX API</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows managing a virtual machine by the VMware Virtual Infrastructure eXtension (VIX) API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><code>Virtual machine.Provisioning</code> privileges:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All <code>Virtual machine.Provisioning</code> privileges are required.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Allow disk access</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows opening a disk on a virtual machine for random read and write access. Used mostly for remote disk mounting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Allow file access</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows operations on files associated with a virtual machine, including VMX, disks, logs, and NVRAM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Allow read-only disk access</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows opening a disk on a virtual machine for random read access. Used mostly for remote disk mounting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Allow virtual machine download</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows read operations on files associated with a virtual machine, including VMX, disks, logs, and NVRAM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Allow virtual machine files upload</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows write operations on files associated with a virtual machine, including VMX, disks, logs, and NVRAM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Clone template</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows cloning of a template.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Clone virtual machine</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows cloning of an existing virtual machine and allocation of resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Create template from virtual machine</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows creation of a new template from a virtual machine.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Customize guest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows customization of a virtual machine&#8217;s guest operating system without moving the virtual machine.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Deploy template</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows deployment of a virtual machine from a template.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Mark as template</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows marking an existing powered-off virtual machine as a template.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Mark as virtual machine</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows marking an existing template as a virtual machine.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Modify customization specification</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows creation, modification, or deletion of customization specifications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Promote disks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows promote operations on a virtual machine&#8217;s disks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Provisioning.Read customization specifications</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows reading a customization specification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>Virtual machine.Snapshot management</code> privileges:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Snapshot management.Create snapshot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows creation of a snapshot from the virtual machine&#8217;s current state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Virtual machine.Snapshot management.Remove Snapshot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows removal of a snapshot from the snapshot history.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>Datastore</code> privileges:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Datastore.Browse datastore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows exploring the contents of a datastore.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Datastore.Low level file operations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows performing low-level file operations - read, write, delete, and rename - in a datastore.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>Sessions</code> privileges:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Sessions.Validate session</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows verification of the validity of a session.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>Cryptographic</code> privileges:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Cryptographic.Decrypt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows decryption of an encrypted virtual machine.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Cryptographic.Direct access</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows access to encrypted resources.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Create a role in VMware with the permissions described in the preceding table and then apply this role to the <strong>Inventory</strong> section, as described in <a href="#creating-vmware-role-mtv-permissions_mtv">Creating a VMware role to apply MTV permissions</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="creating-vmware-role-mtv-permissions_mtv">Creating a VMware role to grant MTV privileges</h4>
<div class="paragraph _abstract">
<p>You can create a role in VMware to grant privileges for Migration Toolkit for Virtualization (MTV) and then grant those privileges to users with that role.</p>
</div>
<div class="paragraph">
<p>The procedure that follows explains how to do this in general. For detailed instructions, see VMware documentation.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the vCenter Server UI, create a role that includes the set of privileges described in the table in <a href="#vmware-prerequisites_mtv">VMware prerequisites</a>.</p>
</li>
<li>
<p>In the vSphere inventory UI, grant privileges for users with this role to the appropriate vSphere logical objects at one of the following levels:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>At the user or group level: Assign privileges to the appropriate logical objects in the data center and use the <strong>Propagate to child objects</strong> option.</p>
</li>
<li>
<p>At the object level: Apply the same role individually to all the relevant vSphere logical objects involved in the migration, for example, hosts, vSphere clusters, data centers, or networks.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="creating-vddk-image_mtv">Creating a VDDK image</h4>
<div class="paragraph _abstract">
<p>It is strongly recommended that Migration Toolkit for Virtualization (MTV) should be used with the VMware Virtual Disk Development Kit (VDDK) SDK when transferring virtual disks from VMware vSphere.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Creating a VDDK image, although optional, is highly recommended. Using MTV without VDDK is not recommended and could result in significantly lower migration speeds.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To make use of this feature, you download the VDDK, build a VDDK image, and push the VDDK image to your image registry.</p>
</div>
<div class="paragraph">
<p>The VDDK package contains symbolic links, therefore, the procedure of creating a VDDK image must be performed on a file system that preserves symbolic links (symlinks).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Storing the VDDK image in a public registry might violate the VMware license terms.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/registry/setting-up-and-configuring-the-registry#configuring-registry-storage-baremetal">Red Hat OpenShift image registry</a>.</p>
</li>
<li>
<p><code>podman</code> installed.</p>
</li>
<li>
<p>You are working on a file system that preserves symbolic links (symlinks).</p>
</li>
<li>
<p>If you are using an external registry, OpenShift Virtualization must be able to access it.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create and navigate to a temporary directory:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ mkdir /tmp/&lt;dir_name&gt; &amp;&amp; cd /tmp/&lt;dir_name&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>In a browser, navigate to the <a href="https://developer.vmware.com/web/sdk/8.0/vddk">VMware VDDK version 8 download page</a>.</p>
</li>
<li>
<p>Select version 8.0.1 and click <strong>Download</strong>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In order to migrate to OpenShift Virtualization 4.12, download VDDK version 7.0.3.2 from the <a href="https://developer.vmware.com/web/sdk/7.0/vddk">VMware VDDK version 7 download page</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Save the VDDK archive file in the temporary directory.</p>
</li>
<li>
<p>Extract the VDDK archive:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ tar -xzf VMware-vix-disklib-&lt;version&gt;.x86_64.tar.gz</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>Dockerfile</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ cat &gt; Dockerfile &lt;&lt;EOF
FROM registry.access.redhat.com/ubi8/ubi-minimal
USER 1001
COPY vmware-vix-disklib-distrib /vmware-vix-disklib-distrib
RUN mkdir -p /opt
ENTRYPOINT ["cp", "-r", "/vmware-vix-disklib-distrib", "/opt"]
EOF</code></pre>
</div>
</div>
</li>
<li>
<p>Build the VDDK image:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ podman build . -t &lt;registry_route_or_server_path&gt;/vddk:&lt;tag&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Push the VDDK image to the registry:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ podman push &lt;registry_route_or_server_path&gt;/vddk:&lt;tag&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Ensure that the image is accessible to your OpenShift Virtualization environment.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="increasing-nfc-memory-vmware-host_mtv">Increasing the NFC service memory of an ESXi host</h4>
<div class="paragraph _abstract">
<p>If you are migrating more than 10 VMs from an ESXi host in the same migration plan, you must increase the Network File copy (NFC) service memory of the host. Otherwise, the migration fails because the NFC service memory is limited to 10 parallel connections.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to the ESXi host as root.</p>
</li>
<li>
<p>Change the value of <code>maxMemory</code> to <code>1000000000</code> in <code>/etc/vmware/hostd/config.xml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">...
      &lt;nfcsvc&gt;
         &lt;path&gt;libnfcsvc.so&lt;/path&gt;
         &lt;enabled&gt;true&lt;/enabled&gt;
         &lt;maxMemory&gt;1000000000&lt;/maxMemory&gt;
         &lt;maxStreamMemory&gt;10485760&lt;/maxStreamMemory&gt;
      &lt;/nfcsvc&gt;
...</code></pre>
</div>
</div>
</li>
<li>
<p>Restart <code>hostd</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal"># /etc/init.d/hostd restart</code></pre>
</div>
</div>
<div class="paragraph">
<p>You do not need to reboot the host.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="vddk-validator-containers_mtv">VDDK validator containers need requests and limits</h4>
<div class="paragraph _abstract">
<p>If you have the <a href="https://docs.openshift.com/container-platform/4.20/applications/quotas/quotas-setting-per-project.html">cluster or project resource quotas set</a>, you must ensure that you have a sufficient quota for the MTV pods to perform the migration. </p>
</div>
<div class="paragraph">
<p>You can see the defaults, which you can override in the <code>ForkliftController</code> custom resource (CR), listed as follows. If necessary, you can adjust these defaults. </p>
</div>
<div class="paragraph">
<p>These settings are highly dependent on your environment. If there are many migrations happening at once and the quotas are not set enough for the migrations, then the migrations can fail. This can also be correlated to the <code>MAX_VM_INFLIGHT</code> setting that determines how many VMs/disks are migrated at once.</p>
</div>
<div class="paragraph">
<p>The following defaults can be overriden in the <code>ForkliftController</code> CR:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Defaults that affect both cold and warm migrations:</p>
<div class="paragraph">
<p>For cold migration, it is likely to be more resource intensive as it performs the disk copy. For warm migration, you could potentially reduce the requests.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>virt_v2v_container_limits_cpu: <code>4000m</code></p>
</li>
<li>
<p>virt_v2v_container_limits_memory: <code>8Gi</code></p>
</li>
<li>
<p>virt_v2v_container_requests_cpu: <code>1000m</code></p>
</li>
<li>
<p>virt_v2v_container_requests_memory: <code>1Gi</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Cold and warm migration using <code>virt-v2v</code> can be resource-intensive. For more details, see <a href="https://libguestfs.org/virt-v2v.1.html#compute-power-and-ram">Compute power and RAM</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Defaults that affect any migrations with hooks:</p>
<div class="ulist">
<ul>
<li>
<p>hooks_container_limits_cpu: <code>1000m</code></p>
</li>
<li>
<p>hooks_container_limits_memory: <code>1Gi</code></p>
</li>
<li>
<p>hooks_container_requests_cpu: <code>100m</code></p>
</li>
<li>
<p>hooks_container_requests_memory: <code>150Mi</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Defaults that affect any OVA migrations:</p>
<div class="ulist">
<ul>
<li>
<p>ova_container_limits_cpu: <code>1000m</code></p>
</li>
<li>
<p>ova_container_limits_memory: <code>1Gi</code></p>
</li>
<li>
<p>ova_container_requests_cpu: <code>100m</code></p>
</li>
<li>
<p>ova_container_requests_memory: <code>150Mi</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ova-prerequisites_mtv">Open Virtual Appliance (OVA) prerequisites</h3>
<div class="paragraph _abstract">
<p>The following prerequisites apply to Open Virtual Appliance (OVA) file migrations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All OVA files are created by VMware vSphere.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Migration of OVA files that were not created by VMware vSphere but are compatible with vSphere might succeed. However, migration of such files is not supported by MTV. MTV supports only OVA files created by VMware vSphere.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>The OVA files are in one or more folders under an NFS shared directory in one of the following structures:</p>
<div class="ulist">
<ul>
<li>
<p>In one or more compressed Open Virtualization Format (OVF) packages that hold all the VM information.</p>
<div class="paragraph">
<p>The filename of each compressed package <strong>must</strong> have the <code>.ova</code> extension. Several compressed packages can be stored in the same folder.</p>
</div>
<div class="paragraph">
<p>When this structure is used, MTV scans the root folder and the first-level subfolders for compressed packages.</p>
</div>
<div class="paragraph">
<p>For example, if the NFS share is <code>/nfs</code>, then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The folder <code>/nfs</code> is scanned.</p>
</li>
<li>
<p>The folder <code>/nfs/subfolder1</code> is scanned.</p>
</li>
<li>
<p>However, <code>/nfs/subfolder1/subfolder2</code> is not scanned.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In extracted OVF packages.</p>
<div class="paragraph">
<p>When this structure is used, MTV scans the root folder, first-level subfolders, and second-level subfolders for extracted OVF packages.</p>
</div>
<div class="paragraph">
<p>However, there can be only one <code>.ovf</code> file in a folder. Otherwise, the migration will fail.</p>
</div>
<div class="paragraph">
<p>For example, if the NFS share is <code>/nfs</code>, then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The OVF file <code>/nfs/vm.ovf</code> is scanned.</p>
</li>
<li>
<p>The OVF file <code>/nfs/subfolder1/vm.ovf</code> is scanned.</p>
</li>
<li>
<p>The OVF file <code>/nfs/subfolder1/subfolder2/vm.ovf</code> is scanned.</p>
</li>
<li>
<p>However, the OVF file <code>/nfs/subfolder1/subfolder2/subfolder3/vm.ovf</code> is not scanned.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="cnv-prerequisites_mtv">OpenShift Virtualization prerequisites</h3>
<div class="paragraph _abstract">
<p>The following prerequisites apply to migrations from one OpenShift Virtualization cluster to another:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Both the source and destination OpenShift Virtualization clusters must have the same version of Migration Toolkit for Virtualization (MTV) installed.</p>
</li>
<li>
<p>The source cluster must use OpenShift Virtualization 4.16 or later.</p>
</li>
<li>
<p>Migration from a later version of OpenShift Virtualization to an earlier one is not supported.</p>
</li>
<li>
<p>Migration from an earlier version of OpenShift Virtualization to a later version is supported if both are supported by the current version of MTV. For example, if the current version of OpenShift Virtualization is 4.18, a migration from version 4.16 or 4.17 to version 4.18 is supported, but a migration from version 4.15 to any version is not.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is strongly recommended to migrate only between clusters with the same version of OpenShift Virtualization, although migration from an earlier version of OpenShift Virtualization to a later one is supported.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="compatibility-guidelines_mtv">Software compatibility guidelines</h3>
<div class="paragraph _abstract">
<p>You must install compatible software versions. The table that follows lists the relevant software versions for this version of Migration Toolkit for Virtualization (MTV).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Compatible software versions</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Migration Toolkit for Virtualization</th>
<th class="tableblock halign-left valign-top">Red Hat OpenShift</th>
<th class="tableblock halign-left valign-top">OpenShift Virtualization</th>
<th class="tableblock halign-left valign-top">VMware vSphere</th>
<th class="tableblock halign-left valign-top">Red Hat Virtualization</th>
<th class="tableblock halign-left valign-top">OpenStack</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.20, 4.19, 4.18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.20, 4.19, 4.18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.5 or later</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.4 SP1 or later</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16.1 or later</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Migration from Red Hat Virtualization 4.3</p>
</div>
<div class="paragraph">
<p>MTV was tested only with Red Hat Virtualization 4.4 SP1.
Migration from Red Hat Virtualization (RHV) 4.3 has not been tested with MTV 2.10. While not supported, basic migrations from RHV 4.3 are expected to work.</p>
</div>
<div class="paragraph">
<p>Generally it is advised to upgrade Red Hat Virtualization Manager to the previously mentioned supported version before the migration to OpenShift Virtualization.</p>
</div>
<div class="paragraph">
<p>Therefore, it is recommended to upgrade RHV to the supported version above before the migration to OpenShift Virtualization.</p>
</div>
<div class="paragraph">
<p>However, migrations from RHV 4.3.11 were tested with MTV 2.3, and might work in practice in many environments using MTV 2.10. In this case, it is recommended to upgrade Red Hat Virtualization Manager to the previously mentioned supported version before the migration to OpenShift Virtualization.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="openshift-operator-life-cycles">OpenShift Operator Life Cycles</h4>
<div class="paragraph">
<p>For more information about the software maintenance Life Cycle classifications for Operators shipped by Red Hat for use with OpenShift Container Platform, see <a href="https://access.redhat.com/support/policy/updates/openshift_operators#platform-agnostic">OpenShift Operator Life Cycles</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_installing-mtv-operator_mtv">Installing and configuring the MTV Operator</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You can install the MTV Operator by using the Red Hat OpenShift web console or the command-line interface (CLI).</p>
</div>
<div class="paragraph">
<p>In Migration Toolkit for Virtualization (MTV) version 2.4 and later, the MTV Operator includes the MTV plugin for the Red Hat OpenShift web console.</p>
</div>
<div class="paragraph">
<p>After you install the MTV Operator by using either the Red Hat OpenShift web console or the CLI, you can configure the Operator.</p>
</div>
<div class="sect2">
<h3 id="installing-mtv-operator_web">Installing the MTV Operator by using the Red Hat OpenShift web console</h3>
<div class="paragraph _abstract">
<p>You can install the MTV Operator by using the Red Hat OpenShift web console.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Red Hat OpenShift 4.20, 4.19, 4.18 installed.</p>
</li>
<li>
<p>OpenShift Virtualization Operator installed on an OpenShift migration target cluster.</p>
</li>
<li>
<p>You must be logged in as a user with <code>cluster-admin</code> permissions.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Operators</strong> &#8594; <strong>OperatorHub</strong>.</p>
</li>
<li>
<p>Use the <strong>Filter by keyword</strong> field to search for <strong>mtv-operator</strong>.</p>
</li>
<li>
<p>Click <strong>Migration Toolkit for Virtualization Operator</strong> and then click <strong>Install</strong>.</p>
</li>
<li>
<p>Click <strong>Create ForkliftController</strong> when the button becomes active.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your ForkliftController appears in the list that is displayed.</p>
</div>
</li>
<li>
<p>Click <strong>Workloads</strong> &#8594; <strong>Pods</strong> to verify that the MTV pods are running.</p>
</li>
<li>
<p>Click <strong>Operators</strong> &#8594; <strong>Installed Operators</strong> to verify that <strong>Migration Toolkit for Virtualization Operator</strong> appears in the <strong>openshift-mtv</strong> project with the status <strong>Succeeded</strong>.</p>
<div class="paragraph">
<p>When the plugin is ready you will be prompted to reload the page.  The  <strong>Migration</strong> menu item is automatically added to the navigation bar, displayed on the left of the Red Hat OpenShift web console.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="installing-mtv-operator_cli">Installing the MTV Operator by using the command-line interface</h3>
<div class="paragraph _abstract">
<p>You can install the MTV Operator by using the command-line interface (CLI).</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Red Hat OpenShift 4.20, 4.19, 4.18 installed.</p>
</li>
<li>
<p>OpenShift Virtualization Operator installed on an OpenShift migration target cluster.</p>
</li>
<li>
<p>You must be logged in as a user with <code>cluster-admin</code> permissions.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create the openshift-mtv project:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: project.openshift.io/v1
kind: Project
metadata:
  name: openshift-mtv
EOF</code></pre>
</div>
</div>
</li>
<li>
<p>Create an <code>OperatorGroup</code> CR called <code>migration</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: migration
  namespace: openshift-mtv
spec:
  targetNamespaces:
    - openshift-mtv
EOF</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>Subscription</code> CR for the Operator:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: mtv-operator
  namespace: openshift-mtv
spec:
  channel: release-v2.10
  installPlanApproval: Automatic
  name: mtv-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: "mtv-operator.v2.10.0"
EOF</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>ForkliftController</code> CR:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: ForkliftController
metadata:
  name: forklift-controller
  namespace: openshift-mtv
spec:
  olm_managed: true
EOF</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the MTV pods are running:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ oc get pods -n openshift-mtv</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is example output:</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre>NAME                                                    READY   STATUS    RESTARTS   AGE
forklift-api-bb45b8db4-cpzlg                            1/1     Running   0          6m34s
forklift-controller-7649db6845-zd25p                    2/2     Running   0          6m38s
forklift-must-gather-api-78fb4bcdf6-h2r4m               1/1     Running   0          6m28s
forklift-operator-59c87cfbdc-pmkfc                      1/1     Running   0          28m
forklift-ui-plugin-5c5564f6d6-zpd85                     1/1     Running   0          6m24s
forklift-validation-7d84c74c6f-fj9xg                    1/1     Running   0          6m30s
forklift-volume-populator-controller-85d5cb64b6-mrlmc   1/1     Running   0          6m36s</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuring-mtv-operator_mtv">Configuring the MTV Operator</h3>
<div class="paragraph _abstract">
<p>You can configure the following settings of the MTV Operator by modifying the <code>ForkliftController</code> custom resource (CR), or in the <strong>Settings</strong> section of the <strong>Overview</strong> page, unless otherwise indicated.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maximum number of virtual machines (VMs) or disks per plan that Migration Toolkit for Virtualization (MTV) can migrate simultaneously.</p>
</li>
<li>
<p>How long <code>must gather</code> reports are retained before being automatically deleted (<code>ForkliftController</code> CR only).</p>
</li>
<li>
<p>CPU limit allocated to the main controller container.</p>
</li>
<li>
<p>Memory limit allocated to the main controller container.</p>
</li>
<li>
<p>Interval at which a new snapshot is requested before initiating a warm migration.</p>
</li>
<li>
<p>Frequency with which the system checks the status of snapshot creation or removal during a warm migration.</p>
</li>
<li>
<p>Percentage of space in persistent volumes allocated as file system overhead when the <code>storageclass</code> is <code>filesystem</code> (<code>ForkliftController</code> CR only).</p>
</li>
<li>
<p>Fixed amount of additional space allocated in persistent block volumes. This setting is applicable for any <code>storageclass</code> that is block-based (<code>ForkliftController</code> CR only).</p>
</li>
<li>
<p>Configuration map of operating systems to preferences for vSphere source providers (<code>ForkliftController</code> CR only).</p>
</li>
<li>
<p>Configuration map of operating systems to preferences for Red Hat Virtualization (RHV) source providers (<code>ForkliftController</code> CR only).</p>
</li>
<li>
<p>Whether to retain importer pods so that the Containerized Data Importer (CDI) does not delete them during migration (<code>ForkliftController</code> CR only).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The procedure for configuring these settings by using the user interface is presented in <a href="#mtv-overview-page_mtv">Configuring MTV settings</a>. The procedure for configuring these settings by modifying the <code>ForkliftController</code> CR is presented following.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Change a parameter&#8217;s value in the <code>spec</code> section of the <code>ForkliftController</code> CR by adding the parameter and value as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-YAML" data-lang="YAML">spec:
  parameter: value <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Parameters that you can configure using the CLI are shown in the table that follows, along with a description of each parameter and its default value.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. MTV Operator parameters</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller_max_vm_inflight</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Varies with provider as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For all migrations except OVA or VMware migrations: The maximum number of disks that MTV can transfer simultaneously.</p>
</li>
<li>
<p>For Open Virtual Appliance (OVA) migrations: The maximum number of VMs that MTV can migrate simultaneously.</p>
</li>
<li>
<p>For VMware migrations, the parameter has the following meanings:</p>
<div class="ulist">
<ul>
<li>
<p>Cold migration:</p>
<div class="ulist">
<ul>
<li>
<p>To local OpenShift Virtualization: VMs for each ESXi host that can migrate simultaneously.</p>
</li>
<li>
<p>To remote OpenShift Virtualization: Disks for each ESXi host that can migrate simultaneously.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Warm migration: Disks for each ESXi host that can migrate simultaneously.</p>
<div class="paragraph">
<p>See <a href="#max-concurrent-vms_mtv">Configuring the controller_max_vm_inflight parameter</a> for a detailed explanation of this parameter.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>must_gather_api_cleanup_max_age</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The duration in hours for retaining <code>must gather</code> reports before they are automatically deleted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-1</code> (disabled)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller_container_limits_cpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU limit allocated to the main controller container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>500m</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller_container_limits_memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory limit allocated to the main controller container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>800Mi</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller_precopy_interval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The interval in minutes at which a new snapshot is requested before initiating a warm migration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>60</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller_snapshot_status_check_rate_seconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The frequency in seconds with which the system checks the status of snapshot creation or removal during a warm migration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller_filesystem_overhead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Percentage of space in persistent volumes allocated as file system overhead when the <code>storageclass</code> is <code>filesystem</code>.</p>
<p class="tableblock"><code>ForkliftController</code> CR only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller_block_overhead</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed amount of additional space allocated in persistent block volumes. This setting is applicable for any <code>storageclass</code> that is block-based. It can be used when data, such as encryption headers, is written to the persistent volumes in addition to the content of the virtual disk.</p>
<p class="tableblock"><code>ForkliftController</code> CR only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vsphere_osmap_configmap_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Config map for vSphere source providers. This config map maps the operating system of the incoming VM to a OpenShift Virtualization preference name. This config map needs to be in the namespace where the MTV Operator is deployed.</p>
<p class="tableblock">To see the list of preferences in your OpenShift Virtualization environment, open the OpenShift web console and click <strong>Virtualization</strong> &gt; <strong>Preferences</strong>.</p>
<p class="tableblock">Add values to the config map when this parameter has the default value, <code>forklift-vsphere-osmap.</code> To override or delete values, specify a config map that is different from <code>forklift-vsphere-osmap</code>.</p>
<p class="tableblock"><code>ForkliftController</code> CR only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forklift-vsphere-osmap</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ovirt_osmap_configmap_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Config map for RHV source providers. This config map maps the operating system of the incoming VM to a OpenShift Virtualization preference name. This config map needs to be in the namespace where the MTV Operator is deployed.</p>
<p class="tableblock">To see the list of preferences in your OpenShift Virtualization environment, open the OpenShift web console and click <strong>Virtualization</strong> &#8594; <strong>Preferences</strong>.</p>
<p class="tableblock">You can add values to the config map when this parameter has the default value, <code>forklift-ovirt-osmap.</code> To override or delete values, specify a config map that is different from <code>forklift-ovirt-osmap</code>.</p>
<p class="tableblock"><code>ForkliftController</code> CR only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forklift-ovirt-osmap</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller_retain_precopy_importer_pods</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to retain importer pods so that the Containerized Data Importer (CDI) does not delete them during migration.</p>
<p class="tableblock"><code>ForkliftController</code> CR only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="max-concurrent-vms_mtv">Configuring the controller_max_vm_inflight parameter</h3>
<div class="paragraph _abstract">
<p>The value of <code>controller_max_vm_inflight</code> parameter, which is shown in the UI as <strong>Max concurrent virtual machine migrations</strong>, varies by the source provider of the migration</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For all migrations except Open Virtual Appliance (OVA) or VMware migrations, the parameter specifies the maximum number of <em>disks</em> that Migration Toolkit for Virtualization (MTV) can transfer simultaneously. In these migrations, MTV migrates the disks in parallel. This means that if the combined number of disks that you want to migrate is greater than the value of the setting, additional disks must wait until the queue is free, without regard for whether a VM has finished migrating.</p>
<div class="paragraph">
<p>For example, if the value of the parameter is 15, and VM A has 5 disks, VM B has 5 disks, and VM C has 6 disks, all the disks except for the 16th disk start migrating at the same time. Once any of them has migrated, the 16th disk can be migrated, even though not all the disks on VM A and the disks on VM B have finished migrating.</p>
</div>
</li>
<li>
<p>For OVA migrations, the parameter specifies the maximum number of <em>VMs</em> that MTV can migrate simultaneously, meaning that all additional disks must wait until at least one VM has been completely migrated.</p>
<div class="paragraph">
<p>For example, if the value of the parameter is 2, and VM A has 5 disks, VM B has 5 disks, and VM C has 6 disks, all the disks on VM C must wait to migrate until either all the disks on VM A or on VM B finish migrating.</p>
</div>
</li>
<li>
<p>For VMware migrations, the parameter has the following meanings:</p>
<div class="ulist">
<ul>
<li>
<p>Cold migration:</p>
<div class="ulist">
<ul>
<li>
<p>To local OpenShift Virtualization: VMs for each ESXi host that can migrate simultaneously.</p>
</li>
<li>
<p>To remote OpenShift Virtualization: Disks for each ESXi host that can migrate simultaneously.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Warm migration: Disks for each ESXi host that can migrate simultaneously.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_migrating-vms-web-console_mtv">Migrating virtual machines by using the Red Hat OpenShift web console</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Use the MTV user interface to migrate virtual machines (VMs). It is located in the <strong>Virtualization</strong> section of the Red Hat OpenShift web console.</p>
</div>
<div class="sect2">
<h3 id="mtv-ui_mtv">The MTV user interface</h3>
<div class="paragraph _abstract">
<p>The Migration Toolkit for Virtualization (MTV) user interface is integrated into the OpenShift web console.</p>
</div>
<div class="paragraph">
<p>In the left panel, you can choose a page related to a component of the migration progress, for example, <strong>Providers</strong>. Or, if you are an administrator, you can choose <strong>Overview</strong>, which contains information about migrations and lets you configure MTV settings.</p>
</div>
<div class="paragraph">
<p>In pages related to components, you can click on the <strong>Projects</strong> list, which is in the upper-left portion of the page, and see which projects (namespaces) you are allowed to work with.</p>
</div>
</div>
<div class="sect2">
<h3 id="mtv-overview-page_mtv">The MTV Overview page</h3>
<div class="paragraph _abstract">
<p>The Migration Toolkit for Virtualization (MTV) <strong>Overview</strong> page displays system-wide information about migrations and a list of <strong>Settings</strong> you can change.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can access the <strong>Overview</strong> page by clicking <strong>Migration</strong> &#8594; <strong>Overview</strong> in the Red Hat OpenShift web console.</p>
</div>
<div class="paragraph">
<p>The <strong>Overview</strong> page has 3 tabs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>YAML</p>
</li>
<li>
<p>Health</p>
</li>
<li>
<p>History</p>
</li>
<li>
<p>Settings</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="overview-tab_mtv">Overview tab</h4>
<div class="paragraph">
<p>The <strong>Overview</strong> tab is to help you quickly create providers and find information about the whole system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the upper pane, is the <strong>Welcome</strong> section, which includes buttons that let you open the <strong>Create provider</strong> UI for each vendor (VMware, Open Virtual Appliance, OpenStack, Red Hat Virtualization, and OpenShift Virtualization). You can close this section by clicking the Options menu <span class="image"><img src="modules/images/kebab.png" alt="kebab" height="20" title="Options menu"></span> in the upper-right corner and selecting <strong>Hide from view</strong>. You can reopen it by clicking <strong>Show the welcome card</strong> in the upper-right corner.</p>
</li>
<li>
<p>In the center-left pane is a "donut" chart named <strong>Virtual machines</strong>. This chart shows the number of running, failed, and successful virtual machine migrations that MTV ran for the time interval that you select. You can choose a different interval by clicking the list in the upper-right corner of the pane. You can select a different interval by clicking the list. The options are: Last 24 hours, Last 10 days, Last 31 days, and All. By clicking on each division of the chart, you can navigate to the <strong>History</strong> tab for information about the migrations.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Data for this chart includes only the most recent run of a migration plan that was modified due to a failure. For example, if a plan with 3 VMs fails 4 times, then this chart shows that 3 VMs failed, not 12.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>In the center-right pane is an area chart named <strong>Migration history</strong>. This chart shows the number of migrations that succeeded, failed, or were running during the interval shown in the title of the chart. You can choose a different interval by clicking the Options menu <span class="image"><img src="modules/images/kebab.png" alt="kebab" height="20" title="Options menu"></span> in the upper-right corner of the pane. The options are: Last 24 hours, Last 10 days, and Last 31 days. By clicking  on each division of the chart, you can navigate to the <strong>History</strong> tab for information about the migrations.</p>
</li>
<li>
<p>In the lower-left pane is a "donut" chart named <strong>Migration plans</strong>. This chart shows the current number of migration plans grouped by their status. This includes plans that were not started, cannot be started, are incomplete, archived, paused, or have an unknown status. By clicking the <strong>Show all plans</strong> link, you can quickly navigate to the <strong>Migration plans</strong> page.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since a single migration might involve many virtual machines, the number of migrations performed using MTV might vary significantly from the number of migrated virtual machines.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>In the lower-right pane is a table named <strong>MTV health</strong>. This table lists all of the MTV pods. The most important one, <code>forklift-controller</code>, is first. The remaining pods are listed in alphabetical order. The <strong>View all</strong> link opens the <strong>Health</strong> tab. The status and creation time of each pod are listed.  There is also a link to the logs of each pod.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="overview-yaml-tab_mtv">YAML tab</h4>
<div class="paragraph">
<p>The <strong>YAML</strong> tab displays the <code>ForkliftController</code> custom resource (CR) that defines the operation of the MTV Operator. You can modify the CR in this tab.</p>
</div>
</div>
<div class="sect3">
<h4 id="overview-health-tab_mtv">Health tab</h4>
<div class="paragraph">
<p>The <strong>Health</strong> tab has two panes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the upper pane, there is a table named <strong>Health</strong>. It lists all the MTV pods. The most important one, <code>forklift-controller</code>, is first. The remaining pods are listed in alphabetical order. For each pod, the status, and creation time of the pod are listed, and there is a link to the logs of the pod.</p>
</li>
<li>
<p>In the lower pane, there is a table named <strong>Conditions</strong>. It lists the following possible types (states) of the MTV Operator, the status of the type, the last time the condition was updated, the reason for the update, and a message about the condition.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="overview-history-tab_mtv">History tab</h4>
<div class="paragraph">
<p>The <strong>History</strong> tab displays information about migrations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the upper-left of the page, there is a filter that you can use to display only migrations of a certain status, for example, <strong>Succeeded</strong>.</p>
</li>
<li>
<p>To the right of the filter is the <strong>Group by plan</strong> toggle switch, which lets you display either all migrations or view only the most recent migration run per plan within the specified time range.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="overview-settings-tab_mtv">Settings tab</h4>
<div class="paragraph">
<p>The table that follows describes the settings that are visible in the <strong>Settings</strong> tab, their default values, and other possible values that can be set or chosen, if needed.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. MTV settings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Additional values</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum concurrent VM migrations</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Varies with provider as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For all migrations except OVA or VMware migrations: The maximum number of disks that MTV can transfer simultaneously.</p>
</li>
<li>
<p>For OVA migrations: The maximum number of VMs that MTV can migrate simultaneously.</p>
</li>
<li>
<p>For VMware migrations, the setting has the following meanings:</p>
<div class="ulist">
<ul>
<li>
<p>Cold migration:</p>
<div class="ulist">
<ul>
<li>
<p>To local OpenShift Virtualization: VMs for each ESXi host that can migrate simultaneously.</p>
</li>
<li>
<p>To remote OpenShift Virtualization: Disks for each ESXi host that can migrate simultaneously.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Warm migration: Disks for each ESXi host that can migrate simultaneously.</p>
<div class="paragraph">
<p>See <a href="#max-concurrent-vms_mtv">Configuring the controller_max_vm_inflight parameter</a> for a detailed explanation of this setting.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adjustable by either using the <strong>+</strong> and <strong>-</strong> keys to set a different value or by clicking the textbox and entering a new value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controller main container CPU limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU limit that is allocated to the main controller container, in milliCPUs (m).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500 m.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adjustable by selecting another value from the list. Options: 200 m, 500 m, 2000 m, 8000 m.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controller main container memory limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory limit that is allocated to the main controller container in mebibytes (Mi).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">800 Mi.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adjustable by selecting another value from the list. Options: 200 Mi, 800 Mi, 2000 Mi, 8000 Mi.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controller inventory container memory limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory limit that is allocated to the inventory controller container in mebibytes (Mi).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000 Mi.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adjustable by selecting another value from the list. Options: 400 Mi, 1000 Mi, 2000 Mi, 8000 Mi.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Precopy internal (minutes)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The interval in minutes at which a new snapshot is requested before initiating a warm migration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60 minutes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adjustable by selecting another value from the list. Options: 5 minutes, 30 minutes, 60 minutes, 120 minutes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Snapshot polling interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The interval in seconds between which the system checks the status of snapshot creation or removal during a warm migration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adjustable by choosing another value from the list. Options: 1 second, 5 seconds, 10 seconds, 60 seconds.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_migrating_virtual_machines_by_using_the_mtv_user_interface">Migrating virtual machines by using the MTV user interface</h3>
<div class="paragraph">
<p>Use the MTV user interface to migrate VMs from the following providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>VMware vSphere</p>
</li>
<li>
<p>Red Hat Virtualization (RHV)</p>
</li>
<li>
<p>OpenStack</p>
</li>
<li>
<p>Open Virtual Appliances (OVAs) that were created by VMware vSphere</p>
</li>
<li>
<p>OpenShift Virtualization clusters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For all migrations, you specify the source provider, the destination provider, and the migration plan. The specific procedures vary per provider.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must ensure that all prerequisites are met. For more information, see <a href="#assembly_prerequisites-for-migration_mtv">Prerequisites for migration</a>.</p>
</div>
<div class="paragraph">
<p>VMware only: You must have the minimal set of <a href="#vmware-privileges_mtv">VMware privileges</a>.</p>
</div>
<div class="paragraph">
<p>VMware only: Creating a <a href="#creating-vddk-image_mtv">VMware Virtual Disk Development Kit (VDDK)</a> image will increase migration speed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_migrating-vms-cli_mtv">Migrating virtual machines by using the command-line interface</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You migrate virtual machines (VMs) to OpenShift Virtualization from the command-line by creating MTV custom resources (CRs). The CRs and the migration procedure vary by source provider.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must specify a name for cluster-scoped CRs.</p>
</div>
<div class="paragraph">
<p>You must specify both a name and a namespace for namespace-scoped CRs.</p>
</div>
<div class="paragraph">
<p>To migrate to or from an OpenShift cluster that is different from the one the migration plan is defined on, you must have an OpenShift Virtualization service account token with <code>cluster-admin</code> privileges.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must ensure that all prerequisites are met. For more information, see <a href="#assembly_prerequisites-for-migration_mtv">Prerequisites for migration</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="non-admin-permissions_cli">Permissions needed by non-administrators to work with migration plan components</h3>
<div class="paragraph _abstract">
<p>If you are an administrator, you can work with all components of migration plans (for example, providers, network mappings, and migration plans).</p>
</div>
<div class="paragraph">
<p>By default, non-administrators have limited ability to work with migration plans and their components. As an administrator, you can modify their roles to allow them full access to all components, or you can give them limited permissions.</p>
</div>
<div class="paragraph">
<p>For example, administrators can assign non-administrators one or more of the following cluster roles for migration plans:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Example migration plan roles and their privileges</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>plans.forklift.konveyor.io-v1beta1-view</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can view migration plans but not to create, delete or modify them</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>plans.forklift.konveyor.io-v1beta1-edit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can create, delete or modify (all parts of <code>edit</code> permissions) individual migration plans</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>plans.forklift.konveyor.io-v1beta1-admin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All <code>edit</code> privileges and the ability to delete the entire collection of migration plans</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Predefined cluster roles include a resource (for example, <code>plans</code>), an API group (for example, <code>forklift.konveyor.io-v1beta1</code>) and an action (for example, <code>view</code>, <code>edit</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As a more comprehensive example, you can grant non-administrators the following set of permissions per namespace:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create and modify storage maps, network maps, and migration plans for the namespaces they have access to</p>
</li>
<li>
<p>Attach providers created by administrators to storage maps, network maps, and migration plans</p>
</li>
<li>
<p>Not be able to create providers or to change system settings</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Example permissions required for non-adminstrators to work with migration plan components but not create providers</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Actions</th>
<th class="tableblock halign-left valign-top">API group</th>
<th class="tableblock halign-left valign-top">Resource</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get</code>, <code>list</code>, <code>watch</code>, <code>create</code>, <code>update</code>, <code>patch</code>, <code>delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forklift.konveyor.io</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>plans</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get</code>, <code>list</code>, <code>watch</code>, <code>create</code>, <code>update</code>, <code>patch</code>, <code>delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forklift.konveyor.io</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>migrations</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get</code>, <code>list</code>, <code>watch</code>, <code>create</code>, <code>update</code>, <code>patch</code>, <code>delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forklift.konveyor.io</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hooks</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get</code>, <code>list</code>, <code>watch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forklift.konveyor.io</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>providers</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get</code>, <code>list</code>, <code>watch</code>, <code>create</code>, <code>update</code>, <code>patch</code>, <code>delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forklift.konveyor.io</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>networkmaps</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get</code>, <code>list</code>, <code>watch</code>, <code>create</code>, <code>update</code>, <code>patch</code>, <code>delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forklift.konveyor.io</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storagemaps</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get</code>, <code>list</code>, <code>watch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forklift.konveyor.io</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>forkliftcontrollers</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>create</code>, <code>patch</code>, <code>delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>secrets</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Non-administrators need to have the <code>create</code> permissions that are part of <code>edit</code> roles for network maps and for storage maps to create migration plans, even when using a template for a network map or a storage map.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_mapping-networks-storage_mtv">Mapping networks and storage in migration plans</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You can create network maps and storage maps in the Migration Toolkit for Virtualization (MTV) to map source networks and disk storage to OpenShift Virtualization networks and storage classes.</p>
</div>
<div class="sect2">
<h3 id="about-network-maps_mtv">About network maps in migration plans</h3>
<div class="paragraph _abstract">
<p>You can create network maps in Migration Toolkit for Virtualization (MTV) migration plans to map source networks to OpenShift Virtualization networks.</p>
</div>
<div class="paragraph">
<p>There are two types of network maps: maps created for a specific migration plan and maps created for use by any migration plan.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maps created for a specific plan are said to be <em>owned</em> by that plan. You can create these kinds of maps in the <strong>Network maps</strong> step of the <strong>Plan creation wizard</strong>.</p>
</li>
<li>
<p>Maps created for use by any migration plan are to said to be <em>ownerless</em>. You can create these kinds of maps in the <strong>Network maps</strong> page of the <strong>Migration for Virtualization</strong> section of the OpenShift Virtualization web console.</p>
<div class="paragraph">
<p>You, or anyone working in the same project, can use them when creating a migration plan in the <strong>Plan creation wizard</strong>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <em>owner of that copy</em>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map.
Both types of network maps for a project are shown in the <strong>Network maps</strong> page, but there is an important difference in the information displayed in the <strong>Owner</strong> column of that page for each:</p>
</div>
</li>
<li>
<p>Maps created in the <strong>Network maps</strong> page of the <strong>Migration for Virtualization</strong> section of the OpenShift Virtualization web console are shown as having no owner.</p>
</li>
<li>
<p>Maps created in the <strong>Network maps</strong> step of the <strong>Plan creation wizard</strong> are shown as being owned by the migration plan.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="about-storage-maps_mtv">About storage maps in migration plans</h3>
<div class="paragraph _abstract">
<p>You can create storage maps in Migration Toolkit for Virtualization (MTV) migration plans to map source disk storages to OpenShift Virtualization storage classes.</p>
</div>
<div class="paragraph">
<p>There are two types of storage maps: maps created for a specific migration plan and maps created for use by any migration plan.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maps created for a specific plan are said to be <em>owned</em> by that plan. You can create these kinds of maps in the <strong>Storage maps</strong> step of the <strong>Plan creation wizard</strong>.</p>
</li>
<li>
<p>Maps created for use by any migration plan are to said to be <em>ownerless</em>. You can create these kinds of maps in the <strong>Storage maps</strong> page of the <strong>Migration for Virtualization</strong> section of the OpenShift Virtualization web console.</p>
<div class="paragraph">
<p>You, or anyone working in the same project, can use them when creating a migration plan in the <strong>Plan creation wizard</strong>. When you choose one of these unowned maps for a migration plan, MTV creates a copy of the map and defines your migration plan as the <em>owner of that copy</em>. Any changes you make to the copy do not affect the original map, nor do they apply to any other plan that uses a copy of the map.
Both types of storage maps for a project are shown in the <strong>Storage maps</strong> page, but there is an important difference in the information displayed in the <strong>Owner</strong> column of that page for each:</p>
</div>
</li>
<li>
<p>Maps created in the <strong>Storage maps</strong> page of the <strong>Migration for Virtualization</strong> section of the OpenShift Virtualization web console are shown as having no owner.</p>
</li>
<li>
<p>Maps created in the <strong>Storage maps</strong> step of the <strong>Plan creation wizard</strong> are shown as being owned by the migration plan.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_creating_ownerless_storage_maps_in_the_mtv_ui">Creating ownerless storage maps in the MTV UI</h3>
<div class="paragraph">
<p>You can create ownerless storage maps by using the MTV UI to map source disk storage to OpenShift Virtualization storage classes.</p>
</div>
<div class="paragraph">
<p>You can create this type of map by using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Create with form</strong>, selecting items such as a source provider from lists</p>
</li>
<li>
<p><strong>Create with YAML</strong>, either by entering YAML or JSON definitions or by attaching files containing the same</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_planning-migration-vmware_mtv">Planning migration of virtual machines from VMware vSphere</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You prepare and create your VMware vSphere migration plan by performing the following high-level steps in the MTV UI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create ownerless network maps.</p>
</li>
<li>
<p>Add a VMware vSphere source provider.</p>
</li>
<li>
<p>Select a migration network for a VMware source provider.</p>
</li>
<li>
<p>Add an OpenShift Virtualization destination provider.</p>
</li>
<li>
<p>Select a migration network for an OpenShift Virtualization provider.</p>
</li>
<li>
<p>Create a VMware vSphere migration plan.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="creating-yaml-based-network-maps-ui_vmware">Creating ownerless network maps in the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Network maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create NetworkMap</strong>.</p>
<div class="paragraph">
<p>The <strong>Create NetworkMap</strong> page opens.</p>
</div>
</li>
<li>
<p>Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.</p>
</li>
<li>
<p>If you enter YAML definitions, use the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <i class="conum" data-value="1"></i><b>(1)</b>
      source: <i class="conum" data-value="2"></i><b>(2)</b>
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt; <i class="conum" data-value="3"></i><b>(3)</b>
        namespace: &lt;network_attachment_definition_namespace&gt; <i class="conum" data-value="4"></i><b>(4)</b>
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Allowed values are <code>pod</code>, <code>multus</code>, and <code>ignored</code>. Use <code>ignored</code> to avoid attaching VMs to this network for this migration.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>You can use either the <code>id</code> or the <code>name</code> parameter to specify the source network. For <code>id</code>, specify the VMware vSphere network Managed Object Reference (moRef). For more information about retrieving the moRef, see <em>Retrieving a VMware vSphere moRef</em> in <em>Migrating your virtual machines to Red Hat OpenShift Virtualization</em>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specify a network attachment definition for each additional OpenShift Virtualization network.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Required only when <code>type</code> is <code>multus</code>. Specify the namespace of the OpenShift Virtualization network attachment definition.</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Optional: To download your input, click <strong>Download</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of network maps.</p>
</div>
</li>
</ol>
</div>
<div id="creating-form-based-storage-maps-ui-vmware_vmware" class="paragraph _abstract">
<p>You can create ownerless storage maps by using the form page of the MTV UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Have a VMware source provider and a OpenShift Virtualization destination provider. For more information, see <a href="#adding-source-provider_vmware">Adding a VMware vSphere source provider</a> or <a href="#adding-source-provider_dest_vmware">Adding an OpenShift Virtualization destination provider</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Storage maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create storage map</strong> &gt; <strong>Create with form</strong>.</p>
</li>
<li>
<p>Specify the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Map name</strong>: Name of the storage map.</p>
</li>
<li>
<p><strong>Project</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source storage</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target storage</strong>: Select from the list</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: If this is a storage map for a migration using storage copy offload, specify the following offload options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Offload plugin</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Storage secret</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Storage product</strong>: Select from the list</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Storage copy offload is Developer Preview software only. Developer Preview software is not supported by Red&#160;Hat in any way and is not functionally complete or production-ready. Do not use Developer Preview software for production or business-critical workloads. Developer Preview software provides early access to upcoming product software in advance of its possible inclusion in a Red&#160;Hat product offering. Customers can use this software to test functionality and provide feedback during the development process. This software might not have any documentation, is subject to change or removal at any time, and has received limited testing. Red&#160;Hat might provide ways to submit feedback on Developer Preview software without an associated SLA.</p>
</div>
<div class="paragraph">
<p>For more information about the support scope of Red&#160;Hat Developer Preview software, see <a href="https://access.redhat.com/support/offerings/devpreview/">Developer Preview Support Scope</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Click <strong>Add mapping</strong> to create additional storage maps, including mapping multiple storage sources to a single target storage class.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of storage maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-yaml-based-stoarge-maps-ui_vmware">Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Storage maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create storage map</strong> &gt; <strong>Create with YAML</strong>.</p>
<div class="paragraph">
<p>The <strong>Create StorageMap</strong> page opens.</p>
</div>
</li>
<li>
<p>Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.</p>
</li>
<li>
<p>If you enter YAML definitions, use the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <i class="conum" data-value="1"></i><b>(1)</b>
      source:
        id: &lt;source_datastore&gt; <i class="conum" data-value="2"></i><b>(2)</b>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Allowed values are <code>ReadWriteOnce</code> and <code>ReadWriteMany</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the VMware vSphere datastore moRef. For example, <code>f2737930-b567-451a-9ceb-2887f6207009</code>. For more information about retrieving the moRef, see <em>Retrieving a VMware vSphere moRef</em> in <em>Migrating your virtual machines to Red Hat OpenShift Virtualization</em>.</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Optional: To download your input, click <strong>Download</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of storage maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-source-provider_vmware">Adding a VMware vSphere source provider</h3>
<div class="paragraph _abstract">
<p>You can migrate VMware vSphere VMs from VMware vCenter or from a VMware ESX/ESXi server without going through vCenter.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>EMS enforcement is disabled for migrations with VMware vSphere source providers in order to enable migrations from versions of vSphere that are supported by Migration Toolkit for Virtualization but do not comply with the 2023 FIPS requirements. Therefore, users should consider whether migrations from vSphere source providers risk their compliance with FIPS. Supported versions of vSphere are specified in <a href="#compatibility-guidelines_mtv">Software compatibility guidelines</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Anti-virus software can cause migrations to fail. It is strongly recommended to remove such software from source VMs before you start a migration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>MTV does not support migrating VMware Non-Volatile Memory Express (NVMe) disks.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you input any value of maximum transmission unit (MTU) besides the default value in your migration network, you must also input the same value in the OpenShift transfer network that you use. For more information about the OpenShift transfer network, see <a href="#creating-plan-wizard-290-vmware_vmware">Creating a VMware vSphere migration plan using the MTV wizard</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>It is strongly recommended to create a VMware Virtual Disk Development Kit (VDDK) image in a secure registry that is accessible to all clusters. A VDDK image accelerates migration and reduces the risk of a plan failing. If you are not using VDDK and a plan fails, retry with VDDK installed. For more information, see <a href="#creating-vddk-image_mtv">Creating a VDDK image</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Virtual machine (VM) migrations do not work without VDDK when a VM is backed by VMware vSAN.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the <strong>Create provider</strong> page for VMware by doing one of the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Providers</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Create Provider</strong>.</p>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
<li>
<p>Click <strong>VMware</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If you have Administrator privileges, in the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Overview</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the <strong>Welcome</strong> pane, click <strong>VMware</strong>.</p>
<div class="paragraph">
<p>If the <strong>Welcome</strong> pane is not visible, click <strong>Show the welcome card</strong> in the upper-right corner of the page, and click <strong>VMware</strong> when the <strong>Welcome</strong> pane opens.</p>
</div>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the following fields:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Provider details</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Provider resource name</strong>: Name of the source provider.</p>
</li>
<li>
<p><strong>Endpoint type</strong>: Select the vSphere provider endpoint type. Options: <strong>vCenter</strong> or <strong>ESXi</strong>. You can migrate virtual machines from vCenter, an ESX/ESXi server that is not managed by vCenter, or from an ESX/ESXi server that is managed by vCenter but does not go through vCenter.</p>
</li>
<li>
<p><strong>URL</strong>: URL of the SDK endpoint of the vCenter on which the source VM is mounted. Ensure that the URL includes the <code>sdk</code> path, usually <code>/sdk</code>. For example, <code>https://vCenter-host-example.com/sdk</code>. If a certificate for FQDN is specified, the value of this field needs to match the FQDN in the certificate.</p>
</li>
<li>
<p><strong>VDDK init image</strong>: <code>VDDKInitImage</code> path. It is strongly recommended to create a VDDK init image to accelerate migrations. For more information, see <a href="#creating-vddk-image_mtv">Creating a VDDK image</a>.</p>
<div class="paragraph">
<p>Do one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>Skip VMWare Virtual Disk Development Kit (VDDK) SDK acceleration (not recommended)</strong>.</p>
</li>
<li>
<p>Enter the path in the <strong>VDDK init image</strong> text box. Format: <code>&lt;registry_route_or_server_path&gt;/vddk:&lt;tag&gt;</code>.</p>
</li>
<li>
<p>Upload a VDDK archive and build a VDDK init image from the archive by doing the following:</p>
<div class="ulist">
<ul>
<li>
<p>Click <strong>Browse</strong> next to the <strong>VDDK init image archive</strong> text box, select the desired file, and click <strong>Select</strong>.</p>
</li>
<li>
<p>Click <strong>Upload</strong>.</p>
<div class="paragraph">
<p>The URL of the uploaded archive is displayed in the <strong>VDDK init image archive</strong> text box.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Provider credentials</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Username</strong>: vCenter user or ESXi user. For example, <code>user@vsphere.local</code>.</p>
</li>
<li>
<p><strong>Password</strong>: vCenter user password or ESXi user password.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Choose one of the following options for validating CA certificates:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use a custom CA certificate</strong>: Migrate after validating a custom CA certificate.</p>
</li>
<li>
<p><strong>Use the system CA certificate</strong>: Migrate after validating the system CA certificate.</p>
</li>
<li>
<p><strong>Skip certificate validation</strong> : Migrate without validating a CA certificate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To use a custom CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to left, and <em>either</em> drag the CA certificate to the text box <em>or</em> browse for it and click <strong>Select</strong>.</p>
</li>
<li>
<p>To use the system CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to the left, and leave the <strong>CA certificate</strong> text box empty.</p>
</li>
<li>
<p>To skip certificate validation, toggle the <strong>Skip certificate validation</strong> switch to the right.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Ask MTV to fetch a custom CA certificate from the provider&#8217;s API endpoint URL.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Fetch certificate from URL</strong>. The <strong>Verify certificate</strong> window opens.</p>
</li>
<li>
<p>If the details are correct, select the <strong>I trust the authenticity of this certificate</strong> checkbox, and then, click <strong>Confirm</strong>. If not, click <strong>Cancel</strong>, and then, enter the correct certificate information manually.</p>
<div class="paragraph">
<p>Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create provider</strong> to add and save the provider.</p>
<div class="paragraph">
<p>The provider appears in the list of providers.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It might take a few minutes for the provider to have the status <code>Ready</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Optional: Add access to the UI of the provider:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>On the <strong>Providers</strong> page, click the provider.</p>
<div class="paragraph">
<p>The <strong>Provider details</strong> page opens.</p>
</div>
</li>
<li>
<p>Click the <strong>Edit</strong> icon under <strong>External UI web link</strong>.</p>
</li>
<li>
<p>Enter the link and click <strong>Save</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you do not enter a link, MTV attempts to calculate the correct link.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If MTV succeeds, the hyperlink of the field points to the calculated link.</p>
</li>
<li>
<p>If MTV does not succeed, the field remains empty.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</h3>
<div class="paragraph _abstract">
<p>You can select a migration network in the Red Hat OpenShift web console for a source provider to reduce risk to the source environment and to improve performance.</p>
</div>
<div class="paragraph">
<p>Using the default network for migration can result in poor performance because the network might not have sufficient bandwidth. This situation can have a negative effect on the source platform because the disk transfer operation might saturate the network.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can also control the network from which disks are transferred from a host by using the Network File Copy (NFC) service in vSphere.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you input any value of maximum transmission unit (MTU) besides the default value in your migration network, you must also input the same value in the OpenShift transfer network that you use. For more information about the OpenShift transfer network, see <a href="#creating-plan-wizard-290-vmware_vmware">Creating a migration plan</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The migration network must have enough throughput, minimum speed of 10 Gbps, for disk transfer.</p>
</li>
<li>
<p>The migration network must be accessible to the OpenShift Virtualization nodes through the default gateway.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The source virtual disks are copied by a pod that is connected to the pod network of the target namespace.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The migration network should have jumbo frames enabled.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration</strong> &#8594; <strong>Providers for virtualization</strong>.</p>
</li>
<li>
<p>Click the host number in the <strong>Hosts</strong> column beside a provider to view a list of hosts.</p>
</li>
<li>
<p>Select one or more hosts and click <strong>Select migration network</strong>.</p>
</li>
<li>
<p>Specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Network</strong>: Network name</p>
</li>
<li>
<p><strong>ESXi host admin username</strong>: For example, <code>root</code></p>
</li>
<li>
<p><strong>ESXi host admin password</strong>: Password</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Verify that the status of each host is <strong>Ready</strong>.</p>
<div class="paragraph">
<p>If a host status is not <strong>Ready</strong>, the host might be unreachable on the migration network or the credentials might be incorrect. You can modify the host configuration and save the changes.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-source-provider_dest_vmware">Adding an OpenShift Virtualization destination provider</h3>
<div class="paragraph _abstract">
<p>You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>You can also add another OpenShift Virtualization destination provider to the Red Hat OpenShift web console in addition to the default OpenShift Virtualization destination provider, which is the cluster where you installed MTV.</p>
</div>
<div class="paragraph">
<p>You can migrate VMs from the cluster that MTV is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have an OpenShift Virtualization <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/authentication_and_authorization/using-service-accounts">service account token</a> with <code>cluster-admin</code> privileges.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the <strong>Create OpenShift Virtualization provider</strong> interface by doing one of the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Providers</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Create Provider</strong>.</p>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
<li>
<p>Click <strong>OpenShift Virtualization</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If you have Administrator privileges, in the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Overview</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the <strong>Welcome</strong> pane, click <strong>OpenShift Virtualization</strong>.</p>
<div class="paragraph">
<p>If the <strong>Welcome</strong> pane is not visible, click <strong>Show the welcome card</strong> in the upper-right corner of the page, and click <strong>OpenShift Virtualization</strong> when the <strong>Welcome</strong> pane opens.</p>
</div>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Provider resource name</strong>: Name of the source provider</p>
</li>
<li>
<p><strong>URL</strong>: URL of the endpoint of the API server</p>
</li>
<li>
<p><strong>Service account bearer token</strong>: Token for a service account with <code>cluster-admin</code> privileges</p>
<div class="paragraph">
<p>If both <strong>URL</strong> and <strong>Service account bearer token</strong> are left blank, the local OpenShift cluster is used.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Choose one of the following options for validating CA certificates:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use a custom CA certificate</strong>: Migrate after validating a custom CA certificate.</p>
</li>
<li>
<p><strong>Use the system CA certificate</strong>: Migrate after validating the system CA certificate.</p>
</li>
<li>
<p><strong>Skip certificate validation</strong> : Migrate without validating a CA certificate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To use a custom CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to left, and <em>either</em> drag the CA certificate to the text box <em>or</em> browse for it and click <strong>Select</strong>.</p>
</li>
<li>
<p>To use the system CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to the left, and leave the <strong>CA certificate</strong> text box empty.</p>
</li>
<li>
<p>To skip certificate validation, toggle the <strong>Skip certificate validation</strong> switch to the right.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Ask MTV to fetch a custom CA certificate from the provider&#8217;s API endpoint URL.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Fetch certificate from URL</strong>. The <strong>Verify certificate</strong> window opens.</p>
</li>
<li>
<p>If the details are correct, select the <strong>I trust the authenticity of this certificate</strong> checkbox, and then, click <strong>Confirm</strong>. If not, click <strong>Cancel</strong>, and then, enter the correct certificate information manually.</p>
<div class="paragraph">
<p>Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create provider</strong> to add and save the provider.</p>
<div class="paragraph">
<p>The provider appears in the list of providers.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="selecting-migration-network-for-virt-provider_dest_vmware">Selecting a migration network for an OpenShift Virtualization provider</h3>
<div class="paragraph _abstract">
<p>You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.</p>
</div>
<div class="paragraph">
<p>After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.</p>
</div>
<div class="paragraph">
<p>If you do not select a migration network, the default migration network is the <code>pod</code> network, which might not be optimal for disk transfer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can override the default migration network of the provider by selecting a different network when you create a migration plan.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration</strong> &gt; <strong>Providers for virtualization</strong>.</p>
</li>
<li>
<p>Click the OpenShift Virtualization provider whose migration network you want to change.</p>
<div class="paragraph">
<p>When the <strong>Providers detail</strong> page opens:</p>
</div>
</li>
<li>
<p>Click the <strong>Networks</strong> tab.</p>
</li>
<li>
<p>Click <strong>Set default transfer network</strong>.</p>
</li>
<li>
<p>Select a default transfer network from the list and click <strong>Save</strong>.</p>
</li>
<li>
<p>Configure a gateway in the network used for MTV migrations by completing the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Networking</strong> &gt; <strong>NetworkAttachmentDefinitions</strong>.</p>
</li>
<li>
<p>Select the appropriate default transfer network NAD.</p>
</li>
<li>
<p>Click the <strong>YAML</strong> tab.</p>
</li>
<li>
<p>Add <code>forklift.konveyor.io/route</code> to the metadata:annotations section of the YAML, as in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>NetworkAttachmentDefinition</code> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-plan-wizard-290-vmware_vmware">Creating a VMware vSphere migration plan by using the MTV wizard</h3>
<div class="paragraph _abstract">
<p>You can migrate VMware vSphere virtual machines (VMs) from VMware vCenter or from a VMware ESX or ESXi server by using the Migration Toolkit for Virtualization plan creation wizard.</p>
</div>
<div class="paragraph">
<p>The wizard is designed to lead you step-by-step in creating a migration plan.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.</p>
</div>
<div class="paragraph">
<p>This prevents concurrent disk access to the storage the guest points to.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A plan cannot contain more than 500 VMs or 500 disks.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you click <strong>Create plan</strong> on the <strong>Review and create</strong> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <strong>Plan details</strong> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Have a VMware source provider and a OpenShift Virtualization destination provider. For more information, see <a href="#adding-source-provider_vmware">Adding a VMware vSphere source provider</a> or <a href="#adding-source-provider_dest_vmware">Adding an OpenShift Virtualization destination provider</a>.</p>
</li>
<li>
<p>If you plan to create a <strong>Network map</strong> or a <strong>Storage map</strong> that will be used by more than one migration plan, create it in the <strong>Network maps</strong> or <strong>Storage maps</strong> page of the UI before you create a migration plan that uses that map.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>On the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Migration plans</strong>.</p>
</li>
<li>
<p>Click <strong>Create plan</strong>.</p>
<div class="paragraph">
<p>The <strong>Create migration plan</strong> wizard opens.</p>
</div>
</li>
<li>
<p>On the <strong>General</strong> page, specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Plan name</strong>: Enter a name.</p>
</li>
<li>
<p><strong>Plan project</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target project</strong>: Select from the list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Virtual machines</strong> page, select the virtual machines you want to migrate and click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Network map</strong> page, choose one of the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use an existing network map</strong>: Select an existing network map from the list.</p>
<div class="paragraph">
<p>These are network maps available for all plans, and therefore, they are <em>ownerless</em> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <em>owner</em> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Use a new network map</strong>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which will then be considered to be its owner. Maps that you create using this option are not available in the <strong>Use an existing network map</strong> option because each is created with an owner.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create an ownerless network map, which you and others can use for additional migration plans, in the <strong>Network Maps</strong> section of the UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source network</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target network</strong>: Select from the list.</p>
<div class="paragraph">
<p>If needed, click <strong>Add mapping</strong> to add another mapping.</p>
</div>
</li>
<li>
<p><strong>Network map name</strong>: Enter a name or let MTV automatically generate a name for the network map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Storage map</strong> page, choose one of the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use an existing storage map</strong>: Select an existing storage map from the list.</p>
<div class="paragraph">
<p>These are storage maps available for all plans, and therefore, they are <em>ownerless</em> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <em>owner</em> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Use new storage map</strong>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. For each map, specify the following. Maps that you create using this option are not available in the <strong>Use an existing storage map</strong> option because each is created with an owner.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create an ownerless storage map, which you and others can use for additional migration plans, in the <strong>Storage Maps</strong> section of the UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source storage</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target storage</strong>: Select from the list.</p>
<div class="paragraph">
<p>If needed, click <strong>Add mapping</strong> to add another mapping.</p>
</div>
</li>
<li>
<p><strong>Storage map name</strong>: Enter a name or let MTV automatically generate a name for the storage map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Migration type</strong> page, choose one of the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Cold migration</strong> (default)</p>
</li>
<li>
<p><strong>Warm migration</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Other settings (optional)</strong> page, specify any of the following settings that are appropriate for your plan. All are optional.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Disk decryption passphrases</strong>: For disks encrypted using Linux Unified Key Setup (LUKS).</p>
<div class="ulist">
<ul>
<li>
<p>Enter a decryption passphrase for a LUKS-encrypted device.</p>
</li>
<li>
<p>To add another passphrase, click <strong>Add passphrase</strong> and add a passphrase.</p>
</li>
<li>
<p>Repeat as needed.</p>
<div class="paragraph">
<p>You do not need to enter the passphrases in a specific order. For each LUKS-encrypted device, MTV tries each passphrase until one unlocks the device.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Transfer Network</strong>: The network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.</p>
<div class="ulist">
<ul>
<li>
<p>Verify that the transfer network is in the selected target project.</p>
</li>
<li>
<p>To choose a different transfer network, select a different transfer network from the list.</p>
</li>
<li>
<p>Optional: To configure another OpenShift network in the OpenShift web console, click <strong>Networking &gt; NetworkAttachmentDefinitions</strong>.</p>
<div class="paragraph">
<p>To learn more about the different types of networks OpenShift supports, see <a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</a>.</p>
</div>
</li>
<li>
<p>To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <a href="#selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Preserve static IPs</strong>: By default, virtual network interface controllers (vNICs) change during the migration process. As a result, vNICs that are configured with a static IP linked to the interface name in the guest VM lose their IP during migration.</p>
<div class="ulist">
<ul>
<li>
<p>To preserve static IPs, select the <strong>Preserve the static IPs</strong> checkbox.</p>
<div class="paragraph">
<p>MTV then issues a warning message about any VMs whose vNIC properties are missing. To retrieve any missing vNIC properties, run those VMs in vSphere. This causes the vNIC properties to be reported to MTV.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Root device</strong>: Applies to multi-boot VM migrations only. By default, MTV uses the first bootable device detected as the root device.</p>
<div class="ulist">
<ul>
<li>
<p>To specify a different root device, enter it in the text box.</p>
<div class="paragraph">
<p>MTV uses the following format for disk location: <code>/dev/sd&lt;disk_identifier&gt;&lt;disk_partition&gt;</code>. For example, if the second disk is the root device and the operating system is on the disk&#8217;s second partition, the format would be: <code>/dev/sdb2</code>. After you enter the boot device, click <strong>Save</strong>.</p>
</div>
<div class="paragraph">
<p>If the conversion fails because the boot device provided is incorrect, it is possible to get the correct information by checking the conversion pod logs.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Shared disks</strong>: Applies to cold migrations only. Shared disks are disks that are attached to multiple VMs and that use the multi-writer option. These characteristics make shared disks difficult to migrate. By default, MTV migrates shared disks.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Migrating shared disks might slow down the migration process.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>To migrate shared disks in the migration plan, verify that <strong>Shared disks</strong> is selected in the checkbox.</p>
</li>
<li>
<p>To avoid migrating shared disks, clear the <strong>Shared disks</strong> checkbox.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Hooks (optional)</strong> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.</p>
</li>
<li>
<p>To add a hook, select the appropriate <strong>Enable hook</strong> checkbox.</p>
</li>
<li>
<p>Enter the <strong>Hook runner image</strong>.</p>
</li>
<li>
<p>Enter the <strong>Ansible playbook</strong> of the hook in the window.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review and Create</strong> page, review the information displayed.</p>
</li>
<li>
<p>Edit any item by doing the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click its <strong>Edit step</strong> link.</p>
<div class="paragraph">
<p>The wizard opens to the page on which you defined the item.</p>
</div>
</li>
<li>
<p>Edit the item.</p>
</li>
<li>
<p>Either click <strong>Next</strong> to advance to the next page of the wizard, or click <strong>Skip to review</strong> to return directly to the <strong>Review and create</strong> page.</p>
</li>
</ol>
</div>
</li>
<li>
<p>When you finish reviewing the details of the plan, click <strong>Create plan</strong>. MTV validates your plan.</p>
<div class="paragraph">
<p>When your plan is validated, the <strong>Plan details</strong> page for your plan opens in the <strong>Details</strong> tab.</p>
</div>
<div class="paragraph">
<p>The <strong>Plan settings</strong> section of the page includes settings that you specified in the <strong>Other settings (optional)</strong> page and some additional optional settings. The steps below refer to the additional optional steps, but all of the settings can be edited by clicking the Options menu <span class="image"><img src="modules/images/kebab.png" alt="kebab" height="20" title="Options menu"></span>, making the change, and then clicking <strong>Save</strong>.</p>
</div>
</li>
<li>
<p>Check the following items on the <strong>Plan settings</strong> section of the page:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Volume name template</strong>: Specifies a template for the volume interface name for the VMs in your plan.</p>
<div class="paragraph">
<p>The template follows the Go template syntax and has access to the following variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>.PVCName</code>: Name of the PVC mounted to the VM using this volume</p>
</li>
<li>
<p><code>.VolumeIndex</code>: Sequential index of the volume interface (0-based)</p>
<div class="paragraph">
<p>Examples</p>
</div>
</li>
<li>
<p><code>"disk-{{.VolumeIndex}}"</code></p>
</li>
<li>
<p><code>"pvc-{{.PVCName}}"</code></p>
<div class="paragraph">
<p>Variable names cannot exceed 63 characters.</p>
</div>
</li>
<li>
<p>To specify a volume name template for all the VMs in your plan, do the following:</p>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Edit</strong> icon.</p>
</li>
<li>
<p>Click <strong>Enter custom naming template</strong>.</p>
</li>
<li>
<p>Enter the template according to the instructions.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>To specify a different volume name template only for specific VMs, do the following:</p>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Virtual Machines</strong> tab.</p>
</li>
<li>
<p>Select the desired VMs.</p>
</li>
<li>
<p>Click the Options menu <span class="image"><img src="modules/images/kebab.png" alt="kebab" height="20" title="Options menu"></span> of the VM.</p>
</li>
<li>
<p>Select <strong>Edit Volume name template</strong>.</p>
</li>
<li>
<p>Enter the template according to the instructions.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Changes you make on the <strong>Virtual Machines</strong> tab override any changes on the <strong>Plan details</strong> page.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>PVC name template</strong>: Specifies a template for the name of the persistent volume claim (PVC) for the VMs in your plan.</p>
<div class="paragraph">
<p>The template follows the Go template syntax and has access to the following variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>.VmName</code>: Name of the VM</p>
</li>
<li>
<p><code>.PlanName</code>: Name of the migration plan</p>
</li>
<li>
<p><code>.DiskIndex</code>: Initial volume index of the disk</p>
</li>
<li>
<p><code>.RootDiskIndex</code>: Index of the root disk</p>
<div class="paragraph">
<p>Examples</p>
</div>
</li>
<li>
<p><code>"{{.VmName}}-disk-{{.DiskIndex}}"</code></p>
</li>
<li>
<p><code>"{{if eq .DiskIndex .RootDiskIndex}}root{{else}}data{{end}}-{{.DiskIndex}}"</code></p>
<div class="paragraph">
<p>Variable names cannot exceed 63 characters.</p>
</div>
</li>
<li>
<p>To specify a PVC name template for all the VMs in your plan, do the following:</p>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Edit</strong> icon.</p>
</li>
<li>
<p>Click <strong>Enter custom naming template</strong>.</p>
</li>
<li>
<p>Enter the template according to the instructions.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>To specify a PVC name template only for specific VMs, do the following:</p>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Virtual Machines</strong> tab.</p>
</li>
<li>
<p>Select the desired VMs.</p>
</li>
<li>
<p>Click the Options menu <span class="image"><img src="modules/images/kebab.png" alt="kebab" height="20" title="Options menu"></span> of the VM.</p>
</li>
<li>
<p>Select <strong>Edit PVC name template</strong>.</p>
</li>
<li>
<p>Enter the template according to the instructions.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Changes you make on the <strong>Virtual Machines</strong> tab override any changes on the <strong>Plan details</strong> page.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Network name template</strong>: Specifies a template for the network interface name for the VMs in your plan.</p>
<div class="paragraph">
<p>The template follows the Go template syntax and has access to the following variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>.NetworkName:</code> If the target network is <code>multus</code>, add the name of the Multus Network Attachment Definition. Otherwise, leave this variable empty.</p>
</li>
<li>
<p><code>.NetworkNamespace</code>: If the target network is <code>multus</code>, add the namespace where the Multus Network Attachment Definition is located.</p>
</li>
<li>
<p><code>.NetworkType</code>: Network type. Options: <code>multus</code> or <code>pod</code>.</p>
</li>
<li>
<p><code>.NetworkIndex</code>: Sequential index of the network interface (0-based).</p>
<div class="paragraph">
<p>Examples</p>
</div>
</li>
<li>
<p><code>"net-{{.NetworkIndex}}"</code></p>
</li>
<li>
<p><code>{{if eq .NetworkType "pod"}}pod{{else}}multus-{{.NetworkIndex}}{{end}}"</code></p>
<div class="paragraph">
<p>Variable names cannot exceed 63 characters.</p>
</div>
</li>
<li>
<p>To specify a network name template for all the VMs in your plan, do the following:</p>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Edit</strong> icon.</p>
</li>
<li>
<p>Click <strong>Enter custom naming template</strong>.</p>
</li>
<li>
<p>Enter the template according to the instructions.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>To specify a different network name template only for specific VMs, do the following:</p>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Virtual Machines</strong> tab.</p>
</li>
<li>
<p>Select the desired VMs.</p>
</li>
<li>
<p>Click the Options menu <span class="image"><img src="modules/images/kebab.png" alt="kebab" height="20" title="Options menu"></span> of the VM.</p>
</li>
<li>
<p>Select <strong>Edit Network name template</strong>.</p>
</li>
<li>
<p>Enter the template according to the instructions.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Changes you make on the <strong>Virtual Machines</strong> tab override any changes on the <strong>Plan details</strong> page.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Raw copy mode</strong>: By default, during migration, virtual machines (VMs) are converted using a tool named <code>virt-v2v</code> that makes them compatible with OpenShift Virtualization. For more information about the virt-v2v conversion process, see <em>How MTV uses the virt-v2v tool</em> in <em>Migrating your virtual machines to Red Hat OpenShift Virtualization</em>. <em>Raw copy mode</em> copies VMs without converting them. This allows for faster conversions, migrating VMs running a wider range of operating systems, and supporting migrating disks encrypted using Linux Unified Key Setup (LUKS) without needing keys. However, VMs migrated using raw copy mode might not function properly on OpenShift Virtualization.</p>
<div class="ulist">
<ul>
<li>
<p>To use raw copy mode for your migration plan, do the following:</p>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Edit</strong> icon.</p>
</li>
<li>
<p>Toggle the <strong>Raw copy mode</strong> switch.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
<div class="paragraph">
<p>MTV validates any changes you made on this page.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>In addition to listing details based on your entries in the wizard, the <strong>Plan details</strong> tab includes the following two sections after the details of the plan:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Migration history</strong>: Details about successful and unsuccessful attempts to run the plan</p>
</li>
<li>
<p><strong>Conditions</strong>: Any changes that need to be made to the plan so that it can run successfully</p>
</li>
</ul>
</div>
</li>
<li>
<p>When you have fixed all conditions listed, you can run your plan from the <strong>Plans</strong> page.</p>
<div class="paragraph">
<p>The <strong>Plan details</strong> page also includes five additional tabs, which are described in the table that follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Tabs of the Plan details page</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">YAML</th>
<th class="tableblock halign-left valign-top">Virtual Machines</th>
<th class="tableblock halign-left valign-top">Resources</th>
<th class="tableblock halign-left valign-top">Mappings</th>
<th class="tableblock halign-left valign-top">Hooks</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editable YAML <code>Plan</code> manifest based on your plan&#8217;s details including source provider, network and storage maps, VMs, and any issues with your VMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VMs the plan migrates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editable specification of the network and storage maps used by your plan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updatable specification of the hooks used by your plan, if any</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="proc_enabling-nbde-with-clevis_vmware">Enabling Network-Bound Disk Encryption with Clevis</h3>
<div class="paragraph _abstract">
<p>You can migrate virtual machines (VMs) with Linux Unified Key Setup (LUKS)-encrypted disks from VMware vSphere to Red Hat OpenShift Virtualization by enabling Network-Bound Disk Encryption (NBDE) with Clevis. Alternatively, you can manually add passphrases for LUKS-encrypted devices in your migration plan.</p>
</div>
<div class="paragraph">
<p>When you enable NBDE with Clevis, the Tang servers automatically decrypt the LUKS-encrypted disks during a migration. If you do not use NBDE with Clevis, you must manually add passphrases for LUKS-encrypted devices so that the Tang servers can decrypt the disks during a migration.</p>
</div>
<div class="paragraph">
<p>In the MTV UI, you must select either NBDE with Clevis or LUKS passphrases. You can have only one encryption type, and you apply the setting to all VMs in your migration plan.</p>
</div>
<div class="paragraph">
<p>In the YAML file for your migration plan, you can combine encryption types and apply the setting to selected VMs in the YAML file.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Components</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Migration Toolkit for Virtualization (MTV):</strong> Transfers the data of VMs with LUKS-encrypted disks from the source environment to the target OpenShift Virtualization cluster. The data transfer is based on MTV&#8217;s raw copy mode, which copies the encrypted data bit-for-bit, without modifying the underlying encryption.</p>
</li>
<li>
<p><strong>LUKS:</strong> The standard disk encryption specification used on the source VM. The encrypted partitions remain in their original state during the migration process, ensuring data security and integrity.</p>
</li>
<li>
<p><strong>Clevis:</strong> Client-side framework that automates the decryption of LUKS volumes by binding a LUKS key slot to a policy. To migrate VMs with LUKS-encrypted disks, the Clevis configuration is transferred to or re-established in the destination environment. After migration, the Clevis configuration on the destination OpenShift Virtualization host automatically authenticates with the configured network service to retrieve the key to unlock the LUKS-encrypted disk. The automatic retrieval of the key allows the VM to boot without a manual passphrase entry from an administrator.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Benefits</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Automation:</strong> Eliminates the need for manual steps to decrypt volumes post-migration, reducing the risk of human error and accelerating the overall process.</p>
</li>
<li>
<p><strong>Enhanced security:</strong> Maintains the security of VMs throughout their migration lifecycle by preserving LUKS encryption from the source to the destination.</p>
</li>
<li>
<p><strong>Seamless operation:</strong> Ensures that VMs with encrypted disks can be brought online in the new OpenShift Virtualization environment with minimal interruption.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have raw copy mode enabled in MTV to ensure that the encrypted data is copied bit-for-bit without any modification.</p>
</li>
<li>
<p>The Tang servers are accessible from your OpenShift cluster.</p>
</li>
<li>
<p>You have a LUKS key slot bound to the Tang server policy.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For MTV to access the keys from the Tang server, the keys must be on a different subnet range than a user-defined network (UDN).
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Enable Network-Bound Disk Encryption with Clevis in the MTV UI.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Create migration plan wizard, navigate to <strong>Other settings</strong> under <strong>Additional setup</strong> in the left navigation pane.</p>
</li>
<li>
<p>Select <strong>Use NBDE/Clevis</strong>.</p>
<div class="paragraph">
<p>If you are not using NBDE with Clevis, you add passphrases for LUKS-encrypted devices so that the Tang servers can decrypt the disks during a migration.</p>
</div>
</li>
<li>
<p>Click <strong>Next</strong>, and verify that <strong>Use NBDE/Clevis</strong> shows as <strong>Enabled</strong> under <strong>Other settings (optional)</strong>.</p>
</li>
<li>
<p>When you create your migration plan, click <strong>Migration plans</strong> in the left navigation menu, and open the <strong>Plan Details</strong> page for your migration plan.</p>
</li>
<li>
<p>Click the <strong>Edit</strong> icon for <strong>Disk decryption</strong> under <strong>Plan settings</strong>.</p>
</li>
<li>
<p>Verify that <strong>Use network-bound disk encryption (NBDE/Clevis)</strong> is selected.</p>
<div class="paragraph">
<p>If you are not using NBDE with Clevis, verify that the passphrases for LUKS-encrypted devices are added.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Enable Network-Bound Disk Encryption with Clevis in the YAML file.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Migration plans</strong> in the left navigation menu and open the <strong>Plan Details</strong> page for your migration plan.</p>
</li>
<li>
<p>Click the <strong>YAML</strong> tab to open the <code>MigrationPlan</code> custom resource (CR) for your migration plan.</p>
</li>
<li>
<p>For each VM under <code>vms</code> in the YAML file, enter the encryption type. In this example, you set <code>nbdeClevis</code> as the encryption type for <code>vm-1</code>, LUKS passphrase as the encryption type for <code>vm-2</code>, and no encryption type for <code>vm-3</code>:</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vms:
    - id: vm-1
      name: vm-1-esx8.0-rhel8.10-raid1
      targetPowerState: 'on'
      nbdeClevis: true,
    - id: vm-3
      name: vm-3-esx8.0-rhel8.10-raid1
      luks: { name: 'test-secret-1' }
    - id: vm-4
      name: vm-4-esx8.0-rhel8.10-raid1</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Troubleshooting</div>
<ul>
<li>
<p>For information about LUKS or Clevis configuration on the source VM, see <a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html-single/security_hardening/index#configuring-automated-unlocking-of-encrypted-volumes-using-policy-based-decryption_security-hardening">Configuring automated unlocking of encrypted volumes by using policy-based decryption</a> in the RHEL <em>Security hardening</em> guide.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_planning-migration-rhv_mtv">Planning a migration of virtual machines from Red Hat Virtualization</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You prepare and create your Red Hat Virtualization migration plan by performing the following high-level steps in the MTV UI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create ownerless network maps.</p>
</li>
<li>
<p>Add a Red Hat Virtualization source provider.</p>
</li>
<li>
<p>Select a migration network for a VMware source provider.</p>
</li>
<li>
<p>Add an OpenShift Virtualization destination provider.</p>
</li>
<li>
<p>Select a migration network for an OpenShift Virtualization provider.</p>
</li>
<li>
<p>Create a Red Hat Virtualization migration plan.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="creating-yaml-based-network-maps-ui_rhv">Creating ownerless network maps in the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Network maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create NetworkMap</strong>.</p>
<div class="paragraph">
<p>The <strong>Create NetworkMap</strong> page opens.</p>
</div>
</li>
<li>
<p>Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.</p>
</li>
<li>
<p>If you enter YAML definitions, use the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <i class="conum" data-value="1"></i><b>(1)</b>
      source: <i class="conum" data-value="2"></i><b>(2)</b>
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt; <i class="conum" data-value="3"></i><b>(3)</b>
        namespace: &lt;network_attachment_definition_namespace&gt; <i class="conum" data-value="4"></i><b>(4)</b>
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Allowed values are <code>pod</code> and <code>multus</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>You can use either the <code>id</code> or the <code>name</code> parameter to specify the source network. For <code>id</code>, specify the RHV network Universal Unique ID (UUID).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specify a network attachment definition for each additional OpenShift Virtualization network.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Required only when <code>type</code> is <code>multus</code>. Specify the namespace of the OpenShift Virtualization network attachment definition.</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Optional: To download your input, click <strong>Download</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of network maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-form-based-storage-maps-ui-ova_rhv">Creating ownerless storage maps using the form page of the MTV UI</h3>
<div class="paragraph">
<p>You can create ownerless storage maps by using the form page of the MTV UI.</p>
</div>
<div class="ulist _abstract">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Have a Red Hat Virtualization source provider and a OpenShift Virtualization destination provider. For more information, see <a href="#adding-source-provider_rhv">Adding a Red Hat Virtualization source provider</a> or <a href="#adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Storage maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create storage map</strong> &gt; <strong>Create with form</strong>.</p>
</li>
<li>
<p>Specify the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Map name</strong>: Name of the storage map.</p>
</li>
<li>
<p><strong>Project</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source storage</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target storage</strong>: Select from the list</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Click <strong>Add mapping</strong> to create additional storage maps, including mapping multiple storage sources to a single target storage class.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of storage maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-yaml-based-stoarge-maps-ui_rhv">Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Storage maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create storage map</strong> &gt; <strong>Create with YAML</strong>.</p>
<div class="paragraph">
<p>The <strong>Create StorageMap</strong> page opens.</p>
</div>
</li>
<li>
<p>Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.</p>
</li>
<li>
<p>If you enter YAML definitions, use the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <i class="conum" data-value="1"></i><b>(1)</b>
      source:
        id: &lt;source_storage_domain&gt; <i class="conum" data-value="2"></i><b>(2)</b>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Allowed values are <code>ReadWriteOnce</code> and <code>ReadWriteMany</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the RHV storage domain UUID. For example, <code>f2737930-b567-451a-9ceb-2887f6207009</code>.</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Optional: To download your input, click <strong>Download</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of storage maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-source-provider_rhv">Adding a Red Hat Virtualization source provider</h3>
<div class="paragraph _abstract">
<p>You can add a Red Hat Virtualization source provider by using the Red Hat OpenShift web console.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Manager CA certificate, unless it was replaced by a third-party certificate, in which case, specify the Manager Apache CA certificate</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the <strong>Create provider</strong> page for Red Hat Virtualization by doing one of the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Providers</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Create Provider</strong>.</p>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
<li>
<p>Click <strong>Red Hat Virtualization</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If you have Administrator privileges, in the Red Hat OpenShift web console, click  <strong>Migration for Virtualization &gt; Overview</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the <strong>Welcome</strong> pane, click <strong>Red Hat Virtualization</strong>.</p>
<div class="paragraph">
<p>If the <strong>Welcome</strong> pane is not visible, click <strong>Show the welcome card</strong> in the upper-right corner of the page, and click <strong>Red Hat Virtualization</strong> when the <strong>Welcome</strong> pane opens.</p>
</div>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Provider resource name</strong>: Name of the source provider.</p>
</li>
<li>
<p><strong>URL</strong>: URL of the API endpoint of the Red Hat Virtualization Manager (RHVM) on which the source VM is mounted. Ensure that the URL includes the path leading to the RHVM API server, usually <code>/ovirt-engine/api</code>. For example, <code>https://rhv-host-example.com/ovirt-engine/api</code>.</p>
</li>
<li>
<p><strong>Username</strong>: Username.</p>
</li>
<li>
<p><strong>Password</strong>: Password.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Choose one of the following options for validating CA certificates:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use a custom CA certificate</strong>: Migrate after validating a custom CA certificate.</p>
</li>
<li>
<p><strong>Use the system CA certificate</strong>: Migrate after validating the system CA certificate.</p>
</li>
<li>
<p><strong>Skip certificate validation</strong> : Migrate without validating a CA certificate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To use a custom CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to left, and <em>either</em> drag the CA certificate to the text box <em>or</em> browse for it and click <strong>Select</strong>.</p>
</li>
<li>
<p>To use the system CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to the left, and leave the <strong>CA certificate</strong> text box empty.</p>
</li>
<li>
<p>To skip certificate validation, toggle the <strong>Skip certificate validation</strong> switch to the right.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Ask MTV to fetch a custom CA certificate from the provider&#8217;s API endpoint URL.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Fetch certificate from URL</strong>. The <strong>Verify certificate</strong> window opens.</p>
</li>
<li>
<p>If the details are correct, select the <strong>I trust the authenticity of this certificate</strong> checkbox, and then, click <strong>Confirm</strong>. If not, click <strong>Cancel</strong>, and then, enter the correct certificate information manually.</p>
<div class="paragraph">
<p>Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create provider</strong> to add and save the provider.</p>
<div class="paragraph">
<p>The provider appears in the list of providers.</p>
</div>
</li>
<li>
<p>Optional: Add access to the UI of the provider:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>On the <strong>Providers</strong> page, click the provider.</p>
<div class="paragraph">
<p>The <strong>Provider details</strong> page opens.</p>
</div>
</li>
<li>
<p>Click the <strong>Edit</strong> icon under <strong>External UI web link</strong>.</p>
</li>
<li>
<p>Enter the link and click <strong>Save</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you do not enter a link, MTV attempts to calculate the correct link.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If MTV succeeds, the hyperlink of the field points to the calculated link.</p>
</li>
<li>
<p>If MTV does not succeed, the field remains empty.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-source-provider_dest_rhv">Adding an OpenShift Virtualization destination provider</h3>
<div class="paragraph _abstract">
<p>You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>You can also add another OpenShift Virtualization destination provider to the Red Hat OpenShift web console in addition to the default OpenShift Virtualization destination provider, which is the cluster where you installed MTV.</p>
</div>
<div class="paragraph">
<p>You can migrate VMs from the cluster that MTV is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have an OpenShift Virtualization <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/authentication_and_authorization/using-service-accounts">service account token</a> with <code>cluster-admin</code> privileges.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the <strong>Create OpenShift Virtualization provider</strong> interface by doing one of the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Providers</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Create Provider</strong>.</p>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
<li>
<p>Click <strong>OpenShift Virtualization</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If you have Administrator privileges, in the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Overview</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the <strong>Welcome</strong> pane, click <strong>OpenShift Virtualization</strong>.</p>
<div class="paragraph">
<p>If the <strong>Welcome</strong> pane is not visible, click <strong>Show the welcome card</strong> in the upper-right corner of the page, and click <strong>OpenShift Virtualization</strong> when the <strong>Welcome</strong> pane opens.</p>
</div>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Provider resource name</strong>: Name of the source provider</p>
</li>
<li>
<p><strong>URL</strong>: URL of the endpoint of the API server</p>
</li>
<li>
<p><strong>Service account bearer token</strong>: Token for a service account with <code>cluster-admin</code> privileges</p>
<div class="paragraph">
<p>If both <strong>URL</strong> and <strong>Service account bearer token</strong> are left blank, the local OpenShift cluster is used.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Choose one of the following options for validating CA certificates:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use a custom CA certificate</strong>: Migrate after validating a custom CA certificate.</p>
</li>
<li>
<p><strong>Use the system CA certificate</strong>: Migrate after validating the system CA certificate.</p>
</li>
<li>
<p><strong>Skip certificate validation</strong> : Migrate without validating a CA certificate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To use a custom CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to left, and <em>either</em> drag the CA certificate to the text box <em>or</em> browse for it and click <strong>Select</strong>.</p>
</li>
<li>
<p>To use the system CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to the left, and leave the <strong>CA certificate</strong> text box empty.</p>
</li>
<li>
<p>To skip certificate validation, toggle the <strong>Skip certificate validation</strong> switch to the right.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Ask MTV to fetch a custom CA certificate from the provider&#8217;s API endpoint URL.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Fetch certificate from URL</strong>. The <strong>Verify certificate</strong> window opens.</p>
</li>
<li>
<p>If the details are correct, select the <strong>I trust the authenticity of this certificate</strong> checkbox, and then, click <strong>Confirm</strong>. If not, click <strong>Cancel</strong>, and then, enter the correct certificate information manually.</p>
<div class="paragraph">
<p>Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create provider</strong> to add and save the provider.</p>
<div class="paragraph">
<p>The provider appears in the list of providers.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="selecting-migration-network-for-virt-provider_dest_rhv">Selecting a migration network for an OpenShift Virtualization provider</h3>
<div class="paragraph _abstract">
<p>You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.</p>
</div>
<div class="paragraph">
<p>After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.</p>
</div>
<div class="paragraph">
<p>If you do not select a migration network, the default migration network is the <code>pod</code> network, which might not be optimal for disk transfer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can override the default migration network of the provider by selecting a different network when you create a migration plan.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration</strong> &gt; <strong>Providers for virtualization</strong>.</p>
</li>
<li>
<p>Click the OpenShift Virtualization provider whose migration network you want to change.</p>
<div class="paragraph">
<p>When the <strong>Providers detail</strong> page opens:</p>
</div>
</li>
<li>
<p>Click the <strong>Networks</strong> tab.</p>
</li>
<li>
<p>Click <strong>Set default transfer network</strong>.</p>
</li>
<li>
<p>Select a default transfer network from the list and click <strong>Save</strong>.</p>
</li>
<li>
<p>Configure a gateway in the network used for MTV migrations by completing the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Networking</strong> &gt; <strong>NetworkAttachmentDefinitions</strong>.</p>
</li>
<li>
<p>Select the appropriate default transfer network NAD.</p>
</li>
<li>
<p>Click the <strong>YAML</strong> tab.</p>
</li>
<li>
<p>Add <code>forklift.konveyor.io/route</code> to the metadata:annotations section of the YAML, as in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>NetworkAttachmentDefinition</code> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-plan-wizard-290-rhv_rhv">Creating a Red Hat Virtualization migration plan by using the MTV wizard</h3>
<div class="paragraph _abstract">
<p>You can migrate Red Hat Virtualization virtual machines (VMs) by using the Migration Toolkit for Virtualization plan creation wizard.</p>
</div>
<div class="paragraph">
<p>The wizard is designed to lead you step-by-step in creating a migration plan.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.</p>
</div>
<div class="paragraph">
<p>This prevents concurrent disk access to the storage the guest points to.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A plan cannot contain more than 500 VMs or 500 disks.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you click <strong>Create plan</strong> on the <strong>Review and create</strong> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <strong>Plan details</strong> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Have an Red Hat Virtualization source provider and a OpenShift Virtualization destination provider. For more information, see <a href="#adding-source-provider_rhv">Adding a Red Hat Virtualization source provider</a> or <a href="#adding-source-provider_dest_rhv">Adding an OpenShift Virtualization destination provider</a>.</p>
</li>
<li>
<p>If you plan to create a <strong>Network map</strong> or a <strong>Storage map</strong> that will be used by more than one migration plan, create it in the <strong>Network maps</strong> or <strong>Storage maps</strong> page of the UI before you create a migration plan that uses that map.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Migration plans</strong>.</p>
</li>
<li>
<p>Click <strong>Create plan</strong>.</p>
<div class="paragraph">
<p>The <strong>Create migration plan</strong> wizard opens.</p>
</div>
</li>
<li>
<p>On the <strong>General</strong> page, specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Plan name</strong>: Enter a name.</p>
</li>
<li>
<p><strong>Plan project</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target project</strong>: Select from the list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Virtual machines</strong> page, select the virtual machines you want to migrate and click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Network map</strong> page, choose one of the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use an existing network map</strong>: Select an existing network map from the list.</p>
<div class="paragraph">
<p>These are network maps available for all plans, and therefore, they are <em>ownerless</em> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <em>owner</em> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Use a new network map</strong>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which will then be considered to be its owner. Maps that you create using this option are not available in the <strong>Use an existing network map</strong> option because each is created with an owner.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create an ownerless network map, which you and others can use for additional migration plans, in the <strong>Network Maps</strong> section of the UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source network</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target network</strong>: Select from the list.</p>
<div class="paragraph">
<p>If needed, click <strong>Add mapping</strong> to add another mapping.</p>
</div>
</li>
<li>
<p><strong>Network map name</strong>: Enter a name or let MTV automatically generate a name for the network map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Storage map</strong> page, choose one of the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use an existing storage map</strong>: Select an existing storage map from the list.</p>
<div class="paragraph">
<p>These are storage maps available for all plans, and therefore, they are <em>ownerless</em> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <em>owner</em> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Use new storage map</strong>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. For each map, specify the following. Maps that you create using this option are not available in the <strong>Use an existing storage map</strong> option because each is created with an owner.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create an ownerless storage map, which you and others can use for additional migration plans, in the <strong>Storage Maps</strong> section of the UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source storage</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target storage</strong>: Select from the list.</p>
<div class="paragraph">
<p>If needed, click <strong>Add mapping</strong> to add another mapping.</p>
</div>
</li>
<li>
<p><strong>Storage map name</strong>: Enter a name or let MTV automatically generate a name for the storage map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Migration type</strong> page, choose one of the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Cold migration</strong> (default)</p>
</li>
<li>
<p><strong>Warm migration</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Other settings (optional)</strong> page, you have the option to change the <strong>Transfer network</strong> of your migration plan.</p>
<div class="paragraph">
<p>The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Verify that the transfer network is in the selected target project.</p>
</li>
<li>
<p>To choose a different transfer network, select a different transfer network from the list.</p>
</li>
<li>
<p>Optional: To configure another OpenShift network in the OpenShift web console, click <strong>Networking &gt; NetworkAttachmentDefinitions</strong>.</p>
<div class="paragraph">
<p>To learn more about the different types of networks OpenShift supports, see <a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</a>.</p>
</div>
</li>
<li>
<p>To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <a href="#selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Hooks (optional)</strong> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.</p>
</li>
<li>
<p>To add a hook, select the appropriate <strong>Enable hook</strong> checkbox.</p>
</li>
<li>
<p>Enter the <strong>Hook runner image</strong>.</p>
</li>
<li>
<p>Enter the <strong>Ansible playbook</strong> of the hook in the window.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review and Create</strong> page, review the information displayed.</p>
</li>
<li>
<p>Edit any item by doing the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click its <strong>Edit step</strong> link.</p>
<div class="paragraph">
<p>The wizard opens to the page on which you defined the item.</p>
</div>
</li>
<li>
<p>Edit the item.</p>
</li>
<li>
<p>Either click <strong>Next</strong> to advance to the next page of the wizard, or click <strong>Skip to review</strong> to return directly to the <strong>Review and create</strong> page.</p>
</li>
</ol>
</div>
</li>
<li>
<p>When you finish reviewing the details of the plan, click <strong>Create plan</strong>. MTV validates your plan.</p>
<div class="paragraph">
<p>When your plan is validated, the <strong>Plan details</strong> page for your plan opens in the <strong>Details</strong> tab.</p>
</div>
<div class="paragraph">
<p>The <strong>Plan settings</strong> section of the page includes settings that you specified in the <strong>Other settings (optional)</strong> page and some additional optional settings. The steps below refer to the additional optional steps, but all of the settings can be edited by clicking the Options menu <span class="image"><img src="modules/images/kebab.png" alt="kebab" height="20" title="Options menu"></span>, making the change, and then clicking <strong>Save</strong>.</p>
</div>
</li>
<li>
<p>Check the following item on the <strong>Plan settings</strong> section of the page:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Preserve CPU mode</strong>: Generally, the CPU model (type) for Red Hat Virtualization VMs is set at the cluster level. However, the CPU model can be set at the VM level, which is called a custom CPU model.</p>
<div class="paragraph">
<p>By default, MTV sets the CPU model on the destination cluster as follows: MTV preserves custom CPU settings for VMs that have them. For VMs without custom CPU settings, MTV does not set the CPU model. Instead, the CPU model is later set by OpenShift Virtualization.</p>
</div>
<div class="paragraph">
<p>To preserve the cluster-level CPU model of your Red Hat Virtualization VMs, do the following:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click the Options menu <span class="image"><img src="modules/images/kebab.png" alt="kebab" height="20" title="Options menu"></span>.</p>
</li>
<li>
<p>Toggle the <strong>Whether to preserve the CPU model</strong> switch.</p>
</li>
<li>
<p>Click Save.</p>
<div class="paragraph">
<p>MTV validates any changes you made on this page.</p>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>In addition to listing details based on your entries in the wizard, the <strong>Plan details</strong> tab includes the following two sections after the details of the plan:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Migration history</strong>: Details about successful and unsuccessful attempts to run the plan</p>
</li>
<li>
<p><strong>Conditions</strong>: Any changes that need to be made to the plan so that it can run successfully</p>
</li>
</ul>
</div>
</li>
<li>
<p>When you have fixed all conditions listed, you can run your plan from the <strong>Plans</strong> page.</p>
<div class="paragraph">
<p>The <strong>Plan details</strong> page also includes five additional tabs, which are described in the table that follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Tabs of the Plan details page</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">YAML</th>
<th class="tableblock halign-left valign-top">Virtual Machines</th>
<th class="tableblock halign-left valign-top">Resources</th>
<th class="tableblock halign-left valign-top">Mappings</th>
<th class="tableblock halign-left valign-top">Hooks</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editable YAML <code>Plan</code> manifest based on your plan&#8217;s details including source provider, network and storage maps, VMs, and any issues with your VMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VMs the plan migrates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editable specification of the network and storage maps used by your plan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updatable specification of the hooks used by your plan, if any</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_planning-migration-osp_mtv">Planning migration of virtual machines from OpenStack</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You prepare and create your OpenStack migration plan by performing the following high-level steps in the MTV UI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create ownerless network maps.</p>
</li>
<li>
<p>Add an OpenStack source provider.</p>
</li>
<li>
<p>Select a migration network for an OpenStack provider.</p>
</li>
<li>
<p>Add an OpenShift Virtualization destination provider.</p>
</li>
<li>
<p>Select a migration network for an OpenShift Virtualization provider.</p>
</li>
<li>
<p>Create an OpenStack migration plan.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="creating-yaml-based-network-maps-ui_ostack">Creating ownerless network maps in the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Network maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create NetworkMap</strong>.</p>
<div class="paragraph">
<p>The <strong>Create NetworkMap</strong> page opens.</p>
</div>
</li>
<li>
<p>Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.</p>
</li>
<li>
<p>If you enter YAML definitions, use the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <i class="conum" data-value="1"></i><b>(1)</b>
      source:<i class="conum" data-value="2"></i><b>(2)</b>
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
    - destination:
        name: &lt;network_attachment_definition&gt; <i class="conum" data-value="3"></i><b>(3)</b>
        namespace: &lt;network_attachment_definition_namespace&gt; <i class="conum" data-value="4"></i><b>(4)</b>
        type: multus
      source:
        id: &lt;source_network_id&gt;
        name: &lt;source_network_name&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Allowed values are <code>pod</code> and <code>multus</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>You can use either the <code>id</code> or the <code>name</code> parameter to specify the source network. For <code>id</code>, specify the OpenStack network UUID.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specify a network attachment definition for each additional OpenShift Virtualization network.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Required only when <code>type</code> is <code>multus</code>. Specify the namespace of the OpenShift Virtualization network attachment definition.</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Optional: To download your input, click <strong>Download</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of network maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-form-based-storage-maps-ui-ostack_ostack">Creating ownerless storage maps using the form page of the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless storage maps by using the form page of the MTV UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Have an OpenStack source provider and a OpenShift Virtualization destination provider. For more information, see <a href="#adding-source-provider_cnv">Adding an Red Hat OpenShift source provider</a> or <a href="#adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Storage maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create storage map</strong> &gt; <strong>Create with form</strong>.</p>
</li>
<li>
<p>Specify the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Map name</strong>: Name of the storage map.</p>
</li>
<li>
<p><strong>Project</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source storage</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target storage</strong>: Select from the list</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Click <strong>Add mapping</strong> to create additional storage maps, including mapping multiple storage sources to a single target storage class.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of storage maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-yaml-based-stoarge-maps-ui_ostack">Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Storage maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create storage map</strong> &gt; <strong>Create with YAML</strong>.</p>
<div class="paragraph">
<p>The <strong>Create StorageMap</strong> page opens.</p>
</div>
</li>
<li>
<p>Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.</p>
</li>
<li>
<p>If you enter YAML definitions, use the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <i class="conum" data-value="1"></i><b>(1)</b>
      source:
        id: &lt;source_volume_type&gt; <i class="conum" data-value="2"></i><b>(2)</b>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Allowed values are <code>ReadWriteOnce</code> and <code>ReadWriteMany</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the OpenStack <code>volume_type</code> UUID. For example, <code>f2737930-b567-451a-9ceb-2887f6207009</code>.</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Optional: To download your input, click <strong>Download</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of storage maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-source-provider_ostack">Adding an OpenStack source provider</h3>
<div class="paragraph _abstract">
<p>You can add an OpenStack source provider by using the Red Hat OpenShift web console.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you migrate an image-based VM from an OpenStack provider, a snapshot is created for the image that is attached to the source VM, and the data from the snapshot is copied over to the target VM. This means that the target VM will have the same state as that of the source VM at the time the snapshot was created.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the <strong>Create provider</strong> page for OpenStack by doing one of the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Providers</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Create Provider</strong>.</p>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
<li>
<p>Click <strong>OpenStack</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If you have Administrator privileges, in the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Overview</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the <strong>Welcome</strong> pane, click <strong>OpenStack</strong>.</p>
<div class="paragraph">
<p>If the <strong>Welcome</strong> pane is not visible, click <strong>Show the welcome card</strong> in the upper-right corner of the page, and click <strong>OpenStack</strong> when the <strong>Welcome</strong> pane opens.</p>
</div>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Provider resource name</strong>: Name of the source provider.</p>
</li>
<li>
<p><strong>URL</strong>: URL of the OpenStack Identity (Keystone) endpoint. For example, <code>http://controller:5000/v3</code>.</p>
</li>
<li>
<p><strong>Authentication type</strong>: Choose one of the following methods of authentication and supply the information related to your choice. For example, if you choose <strong>Application credential ID</strong> as the authentication type, the <strong>Application credential ID</strong> and the <strong>Application credential secret</strong> fields become active, and you need to supply the ID and the secret.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Application credential ID</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Application credential ID</strong>: OpenStack application credential ID</p>
</li>
<li>
<p><strong>Application credential secret</strong>: OpenStack application credential <code>Secret</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Application credential name</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Application credential name</strong>: OpenStack application credential name</p>
</li>
<li>
<p><strong>Application credential secret</strong>: OpenStack application credential <code>Secret</code></p>
</li>
<li>
<p><strong>Username</strong>: OpenStack username</p>
</li>
<li>
<p><strong>Domain</strong>: OpenStack domain name</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Token with user ID</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Token</strong>: OpenStack token</p>
</li>
<li>
<p><strong>User ID</strong>: OpenStack user ID</p>
</li>
<li>
<p><strong>Project ID</strong>:  OpenStack project ID</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Token with user Name</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Token</strong>: OpenStack token</p>
</li>
<li>
<p><strong>Username</strong>: OpenStack username</p>
</li>
<li>
<p><strong>Project</strong>: OpenStack project</p>
</li>
<li>
<p><strong>Domain name</strong>: OpenStack domain name</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Password</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Username</strong>: OpenStack username</p>
</li>
<li>
<p><strong>Password</strong>: OpenStack password</p>
</li>
<li>
<p><strong>Project</strong>: OpenStack project</p>
</li>
<li>
<p><strong>Domain</strong>: OpenStack domain name</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Choose one of the following options for validating CA certificates:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use a custom CA certificate</strong>: Migrate after validating a custom CA certificate.</p>
</li>
<li>
<p><strong>Use the system CA certificate</strong>: Migrate after validating the system CA certificate.</p>
</li>
<li>
<p><strong>Skip certificate validation</strong> : Migrate without validating a CA certificate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To use a custom CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to left, and <em>either</em> drag the CA certificate to the text box <em>or</em> browse for it and click <strong>Select</strong>.</p>
</li>
<li>
<p>To use the system CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to the left, and leave the <strong>CA certificate</strong> text box empty.</p>
</li>
<li>
<p>To skip certificate validation, toggle the <strong>Skip certificate validation</strong> switch to the right.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Ask MTV to fetch a custom CA certificate from the provider&#8217;s API endpoint URL.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Fetch certificate from URL</strong>. The <strong>Verify certificate</strong> window opens.</p>
</li>
<li>
<p>If the details are correct, select the <strong>I trust the authenticity of this certificate</strong> checkbox, and then, click <strong>Confirm</strong>. If not, click <strong>Cancel</strong>, and then, enter the correct certificate information manually.</p>
<div class="paragraph">
<p>Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create provider</strong> to add and save the provider.</p>
<div class="paragraph">
<p>The provider appears in the list of providers.</p>
</div>
</li>
<li>
<p>Optional: Add access to the UI of the provider:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>On the <strong>Providers</strong> page, click the provider.</p>
<div class="paragraph">
<p>The <strong>Provider details</strong> page opens.</p>
</div>
</li>
<li>
<p>Click the <strong>Edit</strong> icon under <strong>External UI web link</strong>.</p>
</li>
<li>
<p>Enter the link and click <strong>Save</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you do not enter a link, MTV attempts to calculate the correct link.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If MTV succeeds, the hyperlink of the field points to the calculated link.</p>
</li>
<li>
<p>If MTV does not succeed, the field remains empty.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-source-provider_dest_ostack">Adding an OpenShift Virtualization destination provider</h3>
<div class="paragraph _abstract">
<p>You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>You can also add another OpenShift Virtualization destination provider to the Red Hat OpenShift web console in addition to the default OpenShift Virtualization destination provider, which is the cluster where you installed MTV.</p>
</div>
<div class="paragraph">
<p>You can migrate VMs from the cluster that MTV is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have an OpenShift Virtualization <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/authentication_and_authorization/using-service-accounts">service account token</a> with <code>cluster-admin</code> privileges.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the <strong>Create OpenShift Virtualization provider</strong> interface by doing one of the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Providers</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Create Provider</strong>.</p>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
<li>
<p>Click <strong>OpenShift Virtualization</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If you have Administrator privileges, in the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Overview</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the <strong>Welcome</strong> pane, click <strong>OpenShift Virtualization</strong>.</p>
<div class="paragraph">
<p>If the <strong>Welcome</strong> pane is not visible, click <strong>Show the welcome card</strong> in the upper-right corner of the page, and click <strong>OpenShift Virtualization</strong> when the <strong>Welcome</strong> pane opens.</p>
</div>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Provider resource name</strong>: Name of the source provider</p>
</li>
<li>
<p><strong>URL</strong>: URL of the endpoint of the API server</p>
</li>
<li>
<p><strong>Service account bearer token</strong>: Token for a service account with <code>cluster-admin</code> privileges</p>
<div class="paragraph">
<p>If both <strong>URL</strong> and <strong>Service account bearer token</strong> are left blank, the local OpenShift cluster is used.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Choose one of the following options for validating CA certificates:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use a custom CA certificate</strong>: Migrate after validating a custom CA certificate.</p>
</li>
<li>
<p><strong>Use the system CA certificate</strong>: Migrate after validating the system CA certificate.</p>
</li>
<li>
<p><strong>Skip certificate validation</strong> : Migrate without validating a CA certificate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To use a custom CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to left, and <em>either</em> drag the CA certificate to the text box <em>or</em> browse for it and click <strong>Select</strong>.</p>
</li>
<li>
<p>To use the system CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to the left, and leave the <strong>CA certificate</strong> text box empty.</p>
</li>
<li>
<p>To skip certificate validation, toggle the <strong>Skip certificate validation</strong> switch to the right.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Ask MTV to fetch a custom CA certificate from the provider&#8217;s API endpoint URL.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Fetch certificate from URL</strong>. The <strong>Verify certificate</strong> window opens.</p>
</li>
<li>
<p>If the details are correct, select the <strong>I trust the authenticity of this certificate</strong> checkbox, and then, click <strong>Confirm</strong>. If not, click <strong>Cancel</strong>, and then, enter the correct certificate information manually.</p>
<div class="paragraph">
<p>Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create provider</strong> to add and save the provider.</p>
<div class="paragraph">
<p>The provider appears in the list of providers.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="selecting-migration-network-for-virt-provider_dest_ostack">Selecting a migration network for an OpenShift Virtualization provider</h3>
<div class="paragraph _abstract">
<p>You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.</p>
</div>
<div class="paragraph">
<p>After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.</p>
</div>
<div class="paragraph">
<p>If you do not select a migration network, the default migration network is the <code>pod</code> network, which might not be optimal for disk transfer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can override the default migration network of the provider by selecting a different network when you create a migration plan.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration</strong> &gt; <strong>Providers for virtualization</strong>.</p>
</li>
<li>
<p>Click the OpenShift Virtualization provider whose migration network you want to change.</p>
<div class="paragraph">
<p>When the <strong>Providers detail</strong> page opens:</p>
</div>
</li>
<li>
<p>Click the <strong>Networks</strong> tab.</p>
</li>
<li>
<p>Click <strong>Set default transfer network</strong>.</p>
</li>
<li>
<p>Select a default transfer network from the list and click <strong>Save</strong>.</p>
</li>
<li>
<p>Configure a gateway in the network used for MTV migrations by completing the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Networking</strong> &gt; <strong>NetworkAttachmentDefinitions</strong>.</p>
</li>
<li>
<p>Select the appropriate default transfer network NAD.</p>
</li>
<li>
<p>Click the <strong>YAML</strong> tab.</p>
</li>
<li>
<p>Add <code>forklift.konveyor.io/route</code> to the metadata:annotations section of the YAML, as in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>NetworkAttachmentDefinition</code> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-plan-wizard-290-ostack_ostack">Creating an OpenStack migration plan by using the MTV wizard</h3>
<div class="paragraph _abstract">
<p>You can migrate OpenStack virtual machines (VMs) by using the Migration Toolkit for Virtualization plan creation wizard.</p>
</div>
<div class="paragraph">
<p>The wizard is designed to lead you step-by-step in creating a migration plan.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.</p>
</div>
<div class="paragraph">
<p>This prevents concurrent disk access to the storage the guest points to.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A plan cannot contain more than 500 VMs or 500 disks.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you click <strong>Create plan</strong> on the <strong>Review and create</strong> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <strong>Plan details</strong> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Have an OpenStack source provider and an OpenShift Virtualization destination provider. For more information, see <a href="#adding-source-provider_ostack">Adding an OpenStack source provider</a> or <a href="#adding-source-provider_dest_ostack">Adding an OpenShift Virtualization destination provider</a>.</p>
</li>
<li>
<p>If you plan to create a <strong>Network map</strong> or a <strong>Storage map</strong> that will be used by more than one migration plan, create it in the <strong>Network maps</strong> or <strong>Storage maps</strong> page of the UI before you create a migration plan that uses that map.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Migration plans</strong>.</p>
</li>
<li>
<p>Click <strong>Create plan</strong>.</p>
<div class="paragraph">
<p>The <strong>Create migration plan</strong> wizard opens.</p>
</div>
</li>
<li>
<p>On the <strong>General</strong> page, specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Plan name</strong>: Enter a name.</p>
</li>
<li>
<p><strong>Plan project</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target project</strong>: Select from the list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Virtual machines</strong> page, select the virtual machines you want to migrate and click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Network map</strong> page, choose one of the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use an existing network map</strong>: Select an existing network map from the list.</p>
<div class="paragraph">
<p>These are network maps available for all plans, and therefore, they are <em>ownerless</em> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <em>owner</em> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Use a new network map</strong>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which will then be considered to be its owner. Maps that you create using this option are not available in the <strong>Use an existing network map</strong> option because each is created with an owner.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create an ownerless network map, which you and others can use for additional migration plans, in the <strong>Network Maps</strong> section of the UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source network</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target network</strong>: Select from the list.</p>
<div class="paragraph">
<p>If needed, click <strong>Add mapping</strong> to add another mapping.</p>
</div>
</li>
<li>
<p><strong>Network map name</strong>: Enter a name or let MTV automatically generate a name for the network map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Storage map</strong> page, choose one of the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use an existing storage map</strong>: Select an existing storage map from the list.</p>
<div class="paragraph">
<p>These are storage maps available for all plans, and therefore, they are <em>ownerless</em> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <em>owner</em> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Use new storage map</strong>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. For each map, specify the following. Maps that you create using this option are not available in the <strong>Use an existing storage map</strong> option because each is created with an owner.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create an ownerless storage map, which you and others can use for additional migration plans, in the <strong>Storage Maps</strong> section of the UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source storage</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target storage</strong>: Select from the list.</p>
<div class="paragraph">
<p>If needed, click <strong>Add mapping</strong> to add another mapping.</p>
</div>
</li>
<li>
<p><strong>Storage map name</strong>: Enter a name or let MTV automatically generate a name for the storage map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Other settings (optional)</strong> page, you have the option to change the <strong>Transfer network</strong> of your migration plan.</p>
<div class="paragraph">
<p>The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Verify that the transfer network is in the selected target project.</p>
</li>
<li>
<p>To choose a different transfer network, select a different transfer network from the list.</p>
</li>
<li>
<p>Optional: To configure another OpenShift network in the OpenShift web console, click <strong>Networking &gt; NetworkAttachmentDefinitions</strong>.</p>
<div class="paragraph">
<p>To learn more about the different types of networks OpenShift supports, see <a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</a>.</p>
</div>
</li>
<li>
<p>To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <a href="#selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Hooks (optional)</strong> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.</p>
</li>
<li>
<p>To add a hook, select the appropriate <strong>Enable hook</strong> checkbox.</p>
</li>
<li>
<p>Enter the <strong>Hook runner image</strong>.</p>
</li>
<li>
<p>Enter the <strong>Ansible playbook</strong> of the hook in the window.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review and Create</strong> page, review the information displayed.</p>
</li>
<li>
<p>Edit any item by doing the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click its <strong>Edit step</strong> link.</p>
<div class="paragraph">
<p>The wizard opens to the page on which you defined the item.</p>
</div>
</li>
<li>
<p>Edit the item.</p>
</li>
<li>
<p>Either click <strong>Next</strong> to advance to the next page of the wizard, or click <strong>Skip to review</strong> to return directly to the <strong>Review and create</strong> page.</p>
</li>
</ol>
</div>
</li>
<li>
<p>When you finish reviewing the details of the plan, click <strong>Create plan</strong>. MTV validates your plan.</p>
<div class="paragraph">
<p>When your plan is validated, the <strong>Plan details</strong> page for your plan opens in the <strong>Details</strong> tab.</p>
</div>
</li>
<li>
<p>In addition to listing details based on your entries in the wizard, the <strong>Plan details</strong> tab includes the following two sections after the details of the plan:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Migration history</strong>: Details about successful and unsuccessful attempts to run the plan</p>
</li>
<li>
<p><strong>Conditions</strong>: Any changes that need to be made to the plan so that it can run successfully</p>
</li>
</ul>
</div>
</li>
<li>
<p>When you have fixed all conditions listed, you can run your plan from the <strong>Plans</strong> page.</p>
<div class="paragraph">
<p>The <strong>Plan details</strong> page also includes five additional tabs, which are described in the table that follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Tabs of the Plan details page</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">YAML</th>
<th class="tableblock halign-left valign-top">Virtual Machines</th>
<th class="tableblock halign-left valign-top">Resources</th>
<th class="tableblock halign-left valign-top">Mappings</th>
<th class="tableblock halign-left valign-top">Hooks</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editable YAML <code>Plan</code> manifest based on your plan&#8217;s details including source provider, network and storage maps, VMs, and any issues with your VMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VMs the plan migrates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editable specification of the network and storage maps used by your plan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updatable specification of the hooks used by your plan, if any</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_planning-migration-ova_mtv">Planning a migration of virtual machines from OVA</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You prepare and create your OVA migration plan by performing the following high-level steps in the MTV UI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create ownerless network maps.</p>
</li>
<li>
<p>Add a OVA source provider.</p>
</li>
<li>
<p>Select a migration network for an OVA source provider.</p>
</li>
<li>
<p>Add an OpenShift Virtualization destination provider.</p>
</li>
<li>
<p>Select a migration network for an OpenShift Virtualization provider.</p>
</li>
<li>
<p>Create a OVA migration plan.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="creating-yaml-based-network-maps-ui_ova">Creating ownerless network maps in the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Network maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create NetworkMap</strong>.</p>
<div class="paragraph">
<p>The <strong>Create NetworkMap</strong> page opens.</p>
</div>
</li>
<li>
<p>Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.</p>
</li>
<li>
<p>If you enter YAML definitions, use the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <i class="conum" data-value="1"></i><b>(1)</b>
      source:
        id: &lt;source_network_id&gt; <i class="conum" data-value="2"></i><b>(2)</b>
    - destination:
        name: &lt;network_attachment_definition&gt; <i class="conum" data-value="3"></i><b>(3)</b>
        namespace: &lt;network_attachment_definition_namespace&gt; <i class="conum" data-value="4"></i><b>(4)</b>
        type: multus
      source:
        id: &lt;source_network_id&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Allowed values are <code>pod</code> and <code>multus</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the OVA network Universal Unique ID (UUID).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specify a network attachment definition for each additional OpenShift Virtualization network.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Required only when <code>type</code> is <code>multus</code>. Specify the namespace of the OpenShift Virtualization network attachment definition.</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Optional: To download your input, click <strong>Download</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of network maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-form-based-storage-maps-ui-ova_ova">Creating ownerless storage maps using the form page of the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless storage maps by using the form page of the MTV UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Have an Open Virtual Appliance (OVA) source provider and a OpenShift Virtualization destination provider. For more information, see <a href="#adding-source-provider_ova">Adding an Open Virtual Appliance (OVA) source provider</a> or <a href="#adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Storage maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create storage map</strong> &gt; <strong>Create with form</strong>.</p>
</li>
<li>
<p>Specify the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Map name</strong>: Name of the storage map.</p>
</li>
<li>
<p><strong>Project</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source storage</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target storage</strong>: Select from the list</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Click <strong>Add mapping</strong> to create additional storage maps, including mapping multiple storage sources to a single target storage class.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of storage maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-yaml-based-stoarge-maps-ui_ova">Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Storage maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create storage map</strong> &gt; <strong>Create with YAML</strong>.</p>
<div class="paragraph">
<p>The <strong>Create StorageMap</strong> page opens.</p>
</div>
</li>
<li>
<p>Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.</p>
</li>
<li>
<p>If you enter YAML definitions, use the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">$ cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <i class="conum" data-value="1"></i><b>(1)</b>
      source:
        name:  Dummy storage for source provider &lt;provider_name&gt; <i class="conum" data-value="2"></i><b>(2)</b>
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Allowed values are <code>ReadWriteOnce</code> and <code>ReadWriteMany</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>For OVA, the <code>StorageMap</code> can map only a single storage, which all the disks from the OVA are associated with, to a storage class at the destination. For this reason, the storage is referred to in the UI as "Dummy storage for source provider &lt;provider_name&gt;". In the YAML, write the phrase as it appears above, without the quotation marks and replacing &lt;provider_name&gt; with the actual name of the provider.</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Optional: To download your input, click <strong>Download</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of storage maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-source-provider_ova">Adding an Open Virtual Appliance (OVA) source provider</h3>
<div class="paragraph _abstract">
<p>You can add Open Virtual Appliance (OVA) files that were created by VMware vSphere as a source provider by using the Red Hat OpenShift web console.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the <strong>Create provider</strong> page for Open Virtual Appliance by doing one of the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Providers</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Create Provider</strong>.</p>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
<li>
<p>Click <strong>Open Virtual Appliance</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If you have Administrator privileges, in the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Overview</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the <strong>Welcome</strong> pane, click <strong>Open Virtual Appliance</strong>.</p>
<div class="paragraph">
<p>If the <strong>Welcome</strong> pane is not visible, click <strong>Show the welcome card</strong> in the upper-right corner of the page, and click <strong>Open Virtual Appliance</strong> when the <strong>Welcome</strong> pane opens.</p>
</div>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Provider resource name</strong>: Name of the source provider</p>
</li>
<li>
<p><strong>URL</strong>: URL of the NFS file share that serves the OVA</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create provider</strong> to add and save the provider.</p>
<div class="paragraph">
<p>The provider appears in the list of providers.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>An error message might appear that states that an error has occurred. You can ignore this message.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-source-provider_dest_ova">Adding an OpenShift Virtualization destination provider</h3>
<div class="paragraph _abstract">
<p>You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>You can also add another OpenShift Virtualization destination provider to the Red Hat OpenShift web console in addition to the default OpenShift Virtualization destination provider, which is the cluster where you installed MTV.</p>
</div>
<div class="paragraph">
<p>You can migrate VMs from the cluster that MTV is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have an OpenShift Virtualization <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/authentication_and_authorization/using-service-accounts">service account token</a> with <code>cluster-admin</code> privileges.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the <strong>Create OpenShift Virtualization provider</strong> interface by doing one of the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Providers</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Create Provider</strong>.</p>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
<li>
<p>Click <strong>OpenShift Virtualization</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If you have Administrator privileges, in the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Overview</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the <strong>Welcome</strong> pane, click <strong>OpenShift Virtualization</strong>.</p>
<div class="paragraph">
<p>If the <strong>Welcome</strong> pane is not visible, click <strong>Show the welcome card</strong> in the upper-right corner of the page, and click <strong>OpenShift Virtualization</strong> when the <strong>Welcome</strong> pane opens.</p>
</div>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Provider resource name</strong>: Name of the source provider</p>
</li>
<li>
<p><strong>URL</strong>: URL of the endpoint of the API server</p>
</li>
<li>
<p><strong>Service account bearer token</strong>: Token for a service account with <code>cluster-admin</code> privileges</p>
<div class="paragraph">
<p>If both <strong>URL</strong> and <strong>Service account bearer token</strong> are left blank, the local OpenShift cluster is used.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Choose one of the following options for validating CA certificates:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use a custom CA certificate</strong>: Migrate after validating a custom CA certificate.</p>
</li>
<li>
<p><strong>Use the system CA certificate</strong>: Migrate after validating the system CA certificate.</p>
</li>
<li>
<p><strong>Skip certificate validation</strong> : Migrate without validating a CA certificate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To use a custom CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to left, and <em>either</em> drag the CA certificate to the text box <em>or</em> browse for it and click <strong>Select</strong>.</p>
</li>
<li>
<p>To use the system CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to the left, and leave the <strong>CA certificate</strong> text box empty.</p>
</li>
<li>
<p>To skip certificate validation, toggle the <strong>Skip certificate validation</strong> switch to the right.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Ask MTV to fetch a custom CA certificate from the provider&#8217;s API endpoint URL.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Fetch certificate from URL</strong>. The <strong>Verify certificate</strong> window opens.</p>
</li>
<li>
<p>If the details are correct, select the <strong>I trust the authenticity of this certificate</strong> checkbox, and then, click <strong>Confirm</strong>. If not, click <strong>Cancel</strong>, and then, enter the correct certificate information manually.</p>
<div class="paragraph">
<p>Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create provider</strong> to add and save the provider.</p>
<div class="paragraph">
<p>The provider appears in the list of providers.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="selecting-migration-network-for-virt-provider_dest_ova">Selecting a migration network for an OpenShift Virtualization provider</h3>
<div class="paragraph _abstract">
<p>You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.</p>
</div>
<div class="paragraph">
<p>After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.</p>
</div>
<div class="paragraph">
<p>If you do not select a migration network, the default migration network is the <code>pod</code> network, which might not be optimal for disk transfer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can override the default migration network of the provider by selecting a different network when you create a migration plan.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration</strong> &gt; <strong>Providers for virtualization</strong>.</p>
</li>
<li>
<p>Click the OpenShift Virtualization provider whose migration network you want to change.</p>
<div class="paragraph">
<p>When the <strong>Providers detail</strong> page opens:</p>
</div>
</li>
<li>
<p>Click the <strong>Networks</strong> tab.</p>
</li>
<li>
<p>Click <strong>Set default transfer network</strong>.</p>
</li>
<li>
<p>Select a default transfer network from the list and click <strong>Save</strong>.</p>
</li>
<li>
<p>Configure a gateway in the network used for MTV migrations by completing the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Networking</strong> &gt; <strong>NetworkAttachmentDefinitions</strong>.</p>
</li>
<li>
<p>Select the appropriate default transfer network NAD.</p>
</li>
<li>
<p>Click the <strong>YAML</strong> tab.</p>
</li>
<li>
<p>Add <code>forklift.konveyor.io/route</code> to the metadata:annotations section of the YAML, as in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>NetworkAttachmentDefinition</code> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-plan-wizard-290-ova_ova">Creating an Open Virtualization Appliance (OVA) migration plan by using the MTV wizard</h3>
<div class="paragraph _abstract">
<p>You can migrate Open Virtual Appliance (OVA) files that were created by VMware vSphere by using the Migration Toolkit for Virtualization plan creation wizard.</p>
</div>
<div class="paragraph">
<p>The wizard is designed to lead you step-by-step in creating a migration plan.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.</p>
</div>
<div class="paragraph">
<p>This prevents concurrent disk access to the storage the guest points to.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A plan cannot contain more than 500 VMs or 500 disks.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you click <strong>Create plan</strong> on the <strong>Review and create</strong> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <strong>Plan details</strong> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Have an OVA source provider and a OpenShift Virtualization destination provider. For more information, see <a href="#adding-source-provider_ova">Adding an Open Virtual Appliance (OVA) source provider</a> or <a href="#adding-source-provider_dest_ova">Adding an OpenShift Virtualization destination provider</a>.</p>
</li>
<li>
<p>If you plan to create a <strong>Network map</strong> or a <strong>Storage map</strong> that will be used by more than one migration plan, create it in the <strong>Network maps</strong> or <strong>Storage maps</strong> page of the UI before you create a migration plan that uses that map.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Migration plans</strong>.</p>
</li>
<li>
<p>Click <strong>Create plan</strong>.</p>
<div class="paragraph">
<p>The <strong>Create migration plan</strong> wizard opens.</p>
</div>
</li>
<li>
<p>On the <strong>General</strong> page, specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Plan name</strong>: Enter a name.</p>
</li>
<li>
<p><strong>Plan project</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target project</strong>: Select from the list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Virtual machines</strong> page, select the virtual machines you want to migrate and click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Network map</strong> page, choose one of the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use an existing network map</strong>: Select an existing network map from the list.</p>
<div class="paragraph">
<p>These are network maps available for all plans, and therefore, they are <em>ownerless</em> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <em>owner</em> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Use a new network map</strong>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which will then be considered to be its owner. Maps that you create using this option are not available in the <strong>Use an existing network map</strong> option because each is created with an owner.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create an ownerless network map, which you and others can use for additional migration plans, in the <strong>Network Maps</strong> section of the UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source network</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target network</strong>: Select from the list.</p>
<div class="paragraph">
<p>If needed, click <strong>Add mapping</strong> to add another mapping.</p>
</div>
</li>
<li>
<p><strong>Network map name</strong>: Enter a name or let MTV automatically generate a name for the network map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Storage map</strong> page, choose one of the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use an existing storage map</strong>: Select an existing storage map from the list.</p>
<div class="paragraph">
<p>These are storage maps available for all plans, and therefore, they are <em>ownerless</em> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <em>owner</em> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Use new storage map</strong>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. For each map, specify the following. Maps that you create using this option are not available in the <strong>Use an existing storage map</strong> option because each is created with an owner.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create an ownerless storage map, which you and others can use for additional migration plans, in the <strong>Storage Maps</strong> section of the UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source storage</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target storage</strong>: Select from the list.</p>
<div class="paragraph">
<p>If needed, click <strong>Add mapping</strong> to add another mapping.</p>
</div>
</li>
<li>
<p><strong>Storage map name</strong>: Enter a name or let MTV automatically generate a name for the storage map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Other settings (optional)</strong> page, you have the option to change the <strong>Transfer network</strong> of your migration plan.</p>
<div class="paragraph">
<p>The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Verify that the transfer network is in the selected target project.</p>
</li>
<li>
<p>To choose a different transfer network, select a different transfer network from the list.</p>
</li>
<li>
<p>Optional: To configure another OpenShift network in the OpenShift web console, click <strong>Networking &gt; NetworkAttachmentDefinitions</strong>.</p>
<div class="paragraph">
<p>To learn more about the different types of networks OpenShift supports, see <a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</a>.</p>
</div>
</li>
<li>
<p>To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <a href="#selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Hooks (optional)</strong> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.</p>
</li>
<li>
<p>To add a hook, select the appropriate <strong>Enable hook</strong> checkbox.</p>
</li>
<li>
<p>Enter the <strong>Hook runner image</strong>.</p>
</li>
<li>
<p>Enter the <strong>Ansible playbook</strong> of the hook in the window.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review and Create</strong> page, review the information displayed.</p>
</li>
<li>
<p>Edit any item by doing the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click its <strong>Edit step</strong> link.</p>
<div class="paragraph">
<p>The wizard opens to the page on which you defined the item.</p>
</div>
</li>
<li>
<p>Edit the item.</p>
</li>
<li>
<p>Either click <strong>Next</strong> to advance to the next page of the wizard, or click <strong>Skip to review</strong> to return directly to the <strong>Review and create</strong> page.</p>
</li>
</ol>
</div>
</li>
<li>
<p>When you finish reviewing the details of the plan, click <strong>Create plan</strong>. MTV validates your plan.</p>
<div class="paragraph">
<p>When your plan is validated, the <strong>Plan details</strong> page for your plan opens in the <strong>Details</strong> tab.</p>
</div>
</li>
<li>
<p>In addition to listing details based on your entries in the wizard, the <strong>Plan details</strong> tab includes the following two sections after the details of the plan:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Migration history</strong>: Details about successful and unsuccessful attempts to run the plan</p>
</li>
<li>
<p><strong>Conditions</strong>: Any changes that need to be made to the plan so that it can run successfully</p>
</li>
</ul>
</div>
</li>
<li>
<p>When you have fixed all conditions listed, you can run your plan from the <strong>Plans</strong> page.</p>
<div class="paragraph">
<p>The <strong>Plan details</strong> page also includes five additional tabs, which are described in the table that follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Tabs of the Plan details page</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">YAML</th>
<th class="tableblock halign-left valign-top">Virtual Machines</th>
<th class="tableblock halign-left valign-top">Resources</th>
<th class="tableblock halign-left valign-top">Mappings</th>
<th class="tableblock halign-left valign-top">Hooks</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editable YAML <code>Plan</code> manifest based on your plan&#8217;s details including source provider, network and storage maps, VMs, and any issues with your VMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VMs the plan migrates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editable specification of the network and storage maps used by your plan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updatable specification of the hooks used by your plan, if any</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly_planning-migration-cnv_mtv">Planning a migration of virtual machines from OpenShift Virtualization</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You prepare and create your OpenShift Virtualization migration plan by performing the following high-level steps in the MTV UI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create ownerless network maps.</p>
</li>
<li>
<p>Add an OpenShift Virtualization source provider.</p>
</li>
<li>
<p>Select a migration network for an OpenShift Virtualization provider.</p>
</li>
<li>
<p>Add an OpenShift Virtualization destination provider.</p>
</li>
<li>
<p>Select a migration network for an OpenShift Virtualization provider.</p>
</li>
<li>
<p>Create a OpenShift Virtualization migration plan.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="creating-yaml-based-network-maps-ui_cnv">Creating ownerless network maps in the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless network maps by using the Migration Toolkit for Virtualization (MTV) UI to map source networks to OpenShift Virtualization networks.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Network maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create NetworkMap</strong>.</p>
<div class="paragraph">
<p>The <strong>Create NetworkMap</strong> page opens.</p>
</div>
</li>
<li>
<p>Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.</p>
</li>
<li>
<p>If you enter YAML definitions, use the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">$  cat &lt;&lt; EOF | oc apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: NetworkMap
metadata:
  name: &lt;network_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        name: &lt;network_name&gt;
        type: pod <i class="conum" data-value="1"></i><b>(1)</b>
      source:
        name: &lt;network_name&gt;
        type: pod
    - destination:
        name: &lt;network_attachment_definition&gt; <i class="conum" data-value="2"></i><b>(2)</b>
        namespace: &lt;network_attachment_definition_namespace&gt; <i class="conum" data-value="3"></i><b>(3)</b>
        type: multus
      source:
        name: &lt;network_attachment_definition&gt;
        namespace: &lt;network_attachment_definition_namespace&gt;
        type: multus
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Allowed values are <code>pod</code> and <code>multus</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify a network attachment definition for each additional OpenShift Virtualization network. Specify the <code>namespace</code> either by using the <code>namespace property</code> or with a name built as follows: <code>&lt;network_namespace&gt;/&lt;network_name&gt;</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Required only when <code>type</code> is <code>multus</code>. Specify the namespace of the OpenShift Virtualization network attachment definition.</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Optional: To download your input, click <strong>Download</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of network maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-form-based-storage-maps-ui-cnv_cnv">Creating ownerless storage maps using the form page of the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless storage maps by using the form page of the MTV UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Have a OpenShift Virtualization source provider and a OpenShift Virtualization destination provider. For more information, see <a href="#adding-source-provider_cnv">Adding an OpenShift Virtualization source provider</a> or <a href="#adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Storage maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create storage map</strong> &gt; <strong>Create with form</strong>.</p>
</li>
<li>
<p>Specify the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Map name</strong>: Name of the storage map.</p>
</li>
<li>
<p><strong>Project</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source storage</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target storage</strong>: Select from the list</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Click <strong>Add mapping</strong> to create additional storage maps, including mapping multiple storage sources to a single target storage class.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of storage maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-yaml-based-stoarge-maps-ui_cnv">Creating ownerless storage maps using YAML or JSON definitions in the MTV UI</h3>
<div class="paragraph _abstract">
<p>You can create ownerless storage maps by using YAML or JSON definitions in the Migration Toolkit for Virtualization (MTV) UI.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Storage maps</strong>.</p>
</li>
<li>
<p>Click <strong>Create storage map</strong> &gt; <strong>Create with YAML</strong>.</p>
<div class="paragraph">
<p>The <strong>Create StorageMap</strong> page opens.</p>
</div>
</li>
<li>
<p>Enter the YAML or JSON definitions into the editor, or drag and drop a file into the editor.</p>
</li>
<li>
<p>If you enter YAML definitions, use the following:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>[source,yaml,subs="attributes</code>"]</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cat &lt;&lt; EOF | {oc} apply -f -
apiVersion: forklift.konveyor.io/v1beta1
kind: StorageMap
metadata:
  name: &lt;storage_map&gt;
  namespace: &lt;namespace&gt;
spec:
  map:
    - destination:
        storageClass: &lt;storage_class&gt;
        accessMode: &lt;access_mode&gt; <i class="conum" data-value="1"></i><b>(1)</b>
      source:
        name: &lt;storage_class&gt;
  provider:
    source:
      name: &lt;source_provider&gt;
      namespace: &lt;namespace&gt;
    destination:
      name: &lt;destination_provider&gt;
      namespace: &lt;namespace&gt;
EOF</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Allowed values are <code>ReadWriteOnce</code> and <code>ReadWriteMany</code>.</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Optional: To download your input, click <strong>Download</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>Your map appears in the list of storage maps.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-source-provider_cnv">Adding a Red Hat OpenShift Virtualization source provider</h3>
<div class="paragraph _abstract">
<p>You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>You can migrate VMs from the cluster that MTV is deployed on to another cluster, or from a remote cluster to the cluster that MTV is deployed on.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Red Hat OpenShift cluster version of the source provider must be 4.16 or later.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the <strong>Create provider</strong> interface OpenShift Virtualization by doing one of the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Providers</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Create Provider</strong>.</p>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
<li>
<p>Click <strong>OpenShift Virtualization</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If you have Administrator privileges, in the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Overview</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the <strong>Welcome</strong> pane, click <strong>OpenShift Virtualization</strong>.</p>
<div class="paragraph">
<p>If the <strong>Welcome</strong> pane is not visible, click <strong>Show the welcome card</strong> in the upper-right corner of the page, and click <strong>OpenShift Virtualization</strong> when the <strong>Welcome</strong> pane opens.</p>
</div>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Provider resource name</strong>: Name of the source provider</p>
</li>
<li>
<p><strong>URL</strong>: URL of the endpoint of the API server</p>
</li>
<li>
<p><strong>Service account bearer token</strong>: Token for a service account with <code>cluster-admin</code> privileges</p>
<div class="paragraph">
<p>If both <strong>URL</strong> and <strong>Service account bearer token</strong> are left blank, the local OpenShift cluster is used.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Choose one of the following options for validating CA certificates:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use a custom CA certificate</strong>: Migrate after validating a custom CA certificate.</p>
</li>
<li>
<p><strong>Use the system CA certificate</strong>: Migrate after validating the system CA certificate.</p>
</li>
<li>
<p><strong>Skip certificate validation</strong> : Migrate without validating a CA certificate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To use a custom CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to left, and <em>either</em> drag the CA certificate to the text box <em>or</em> browse for it and click <strong>Select</strong>.</p>
</li>
<li>
<p>To use the system CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to the left, and leave the <strong>CA certificate</strong> text box empty.</p>
</li>
<li>
<p>To skip certificate validation, toggle the <strong>Skip certificate validation</strong> switch to the right.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Ask MTV to fetch a custom CA certificate from the provider&#8217;s API endpoint URL.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Fetch certificate from URL</strong>. The <strong>Verify certificate</strong> window opens.</p>
</li>
<li>
<p>If the details are correct, select the <strong>I trust the authenticity of this certificate</strong> checkbox, and then, click <strong>Confirm</strong>. If not, click <strong>Cancel</strong>, and then, enter the correct certificate information manually.</p>
<div class="paragraph">
<p>Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create provider</strong> to add and save the provider.</p>
<div class="paragraph">
<p>The provider appears in the list of providers.</p>
</div>
</li>
<li>
<p>Optional: Add access to the UI of the provider:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>On the <strong>Providers</strong> page, click the provider.</p>
<div class="paragraph">
<p>The <strong>Provider details</strong> page opens.</p>
</div>
</li>
<li>
<p>Click the <strong>Edit</strong> icon under <strong>External UI web link</strong>.</p>
</li>
<li>
<p>Enter the link and click <strong>Save</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you do not enter a link, MTV attempts to calculate the correct link.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If MTV succeeds, the hyperlink of the field points to the calculated link.</p>
</li>
<li>
<p>If MTV does not succeed, the field remains empty.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</h3>
<div class="paragraph _abstract">
<p>You can use a Red Hat OpenShift Virtualization provider as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>Specifically, the host cluster that is automatically added as a OpenShift Virtualization provider can be used as both a source provider and a destination provider.</p>
</div>
<div class="paragraph">
<p>You can also add another OpenShift Virtualization destination provider to the Red Hat OpenShift web console in addition to the default OpenShift Virtualization destination provider, which is the cluster where you installed MTV.</p>
</div>
<div class="paragraph">
<p>You can migrate VMs from the cluster that MTV is deployed on to another cluster or from a remote cluster to the cluster that MTV is deployed on.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have an OpenShift Virtualization <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.20/html/authentication_and_authorization/using-service-accounts">service account token</a> with <code>cluster-admin</code> privileges.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the <strong>Create OpenShift Virtualization provider</strong> interface by doing one of the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Providers</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Create Provider</strong>.</p>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
<li>
<p>Click <strong>OpenShift Virtualization</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If you have Administrator privileges, in the Red Hat OpenShift web console, click <strong>Migration for Virtualization &gt; Overview</strong>.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>In the <strong>Welcome</strong> pane, click <strong>OpenShift Virtualization</strong>.</p>
<div class="paragraph">
<p>If the <strong>Welcome</strong> pane is not visible, click <strong>Show the welcome card</strong> in the upper-right corner of the page, and click <strong>OpenShift Virtualization</strong> when the <strong>Welcome</strong> pane opens.</p>
</div>
</li>
<li>
<p>Select a <strong>Project</strong> from the list. The default project shown depends on the active project of MTV.</p>
<div class="paragraph">
<p>If the active project is <strong>All projects</strong>, then the default project is <code>openshift-mtv</code>. Otherwise, the default project is the same as the active project.</p>
</div>
<div class="paragraph">
<p>If you have Administrator privileges, you can see all projects, otherwise, you can see only the projects you are authorized to work with.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Provider resource name</strong>: Name of the source provider</p>
</li>
<li>
<p><strong>URL</strong>: URL of the endpoint of the API server</p>
</li>
<li>
<p><strong>Service account bearer token</strong>: Token for a service account with <code>cluster-admin</code> privileges</p>
<div class="paragraph">
<p>If both <strong>URL</strong> and <strong>Service account bearer token</strong> are left blank, the local OpenShift cluster is used.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Choose one of the following options for validating CA certificates:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use a custom CA certificate</strong>: Migrate after validating a custom CA certificate.</p>
</li>
<li>
<p><strong>Use the system CA certificate</strong>: Migrate after validating the system CA certificate.</p>
</li>
<li>
<p><strong>Skip certificate validation</strong> : Migrate without validating a CA certificate.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To use a custom CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to left, and <em>either</em> drag the CA certificate to the text box <em>or</em> browse for it and click <strong>Select</strong>.</p>
</li>
<li>
<p>To use the system CA certificate, leave the <strong>Skip certificate validation</strong> switch toggled to the left, and leave the <strong>CA certificate</strong> text box empty.</p>
</li>
<li>
<p>To skip certificate validation, toggle the <strong>Skip certificate validation</strong> switch to the right.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Optional: Ask MTV to fetch a custom CA certificate from the provider&#8217;s API endpoint URL.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>Fetch certificate from URL</strong>. The <strong>Verify certificate</strong> window opens.</p>
</li>
<li>
<p>If the details are correct, select the <strong>I trust the authenticity of this certificate</strong> checkbox, and then, click <strong>Confirm</strong>. If not, click <strong>Cancel</strong>, and then, enter the correct certificate information manually.</p>
<div class="paragraph">
<p>Once confirmed, the CA certificate will be used to validate subsequent communication with the API endpoint.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create provider</strong> to add and save the provider.</p>
<div class="paragraph">
<p>The provider appears in the list of providers.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="selecting-migration-network-for-virt-provider_dest_cnv">Selecting a migration network for an OpenShift Virtualization provider</h3>
<div class="paragraph _abstract">
<p>You can select a default migration network for an OpenShift Virtualization provider in the Red Hat OpenShift web console to improve performance. The default migration network is used to transfer disks to the namespaces in which it is configured.</p>
</div>
<div class="paragraph">
<p>After you select a transfer network, associate its network attachment definition (NAD) with the gateway to be used by this network.</p>
</div>
<div class="paragraph">
<p>If you do not select a migration network, the default migration network is the <code>pod</code> network, which might not be optimal for disk transfer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can override the default migration network of the provider by selecting a different network when you create a migration plan.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration</strong> &gt; <strong>Providers for virtualization</strong>.</p>
</li>
<li>
<p>Click the OpenShift Virtualization provider whose migration network you want to change.</p>
<div class="paragraph">
<p>When the <strong>Providers detail</strong> page opens:</p>
</div>
</li>
<li>
<p>Click the <strong>Networks</strong> tab.</p>
</li>
<li>
<p>Click <strong>Set default transfer network</strong>.</p>
</li>
<li>
<p>Select a default transfer network from the list and click <strong>Save</strong>.</p>
</li>
<li>
<p>Configure a gateway in the network used for MTV migrations by completing the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Networking</strong> &gt; <strong>NetworkAttachmentDefinitions</strong>.</p>
</li>
<li>
<p>Select the appropriate default transfer network NAD.</p>
</li>
<li>
<p>Click the <strong>YAML</strong> tab.</p>
</li>
<li>
<p>Add <code>forklift.konveyor.io/route</code> to the metadata:annotations section of the YAML, as in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: localnet-network
  namespace: mtv-test
  annotations:
    forklift.konveyor.io/route: &lt;IP address&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>NetworkAttachmentDefinition</code> parameter is needed to configure an IP address for the interface, either from the Dynamic Host Configuration Protocol (DHCP) or statically. Configuring the IP address enables the interface to reach the configured gateway.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-plan-wizard-290-cnv_cnv">Creating an OpenShift Virtualization migration plan by using the MTV wizard</h3>
<div class="paragraph _abstract">
<p>You can migrate OpenShift Virtualization virtual machines (VMs) by using the Migration Toolkit for Virtualization plan creation wizard.</p>
</div>
<div class="paragraph">
<p>The wizard is designed to lead you step-by-step in creating a migration plan.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not include virtual machines with guest-initiated storage connections, such as Internet Small Computer Systems Interface (iSCSI) connections or Network File System (NFS) mounts. These require either additional planning before migration or reconfiguration after migration.</p>
</div>
<div class="paragraph">
<p>This prevents concurrent disk access to the storage the guest points to.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A plan cannot contain more than 500 VMs or 500 disks.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you click <strong>Create plan</strong> on the <strong>Review and create</strong> page of the wizard, Migration Toolkit for Virtualization (MTV) validates your plan. If everything is OK, the <strong>Plan details</strong> page for your plan opens. This page contains settings that do not appear in the wizard, but are important. Be sure to read and follow the instructions for this page carefully, even though it is outside the plan creation wizard. The page can be opened later, any time before you run the plan, so you can come back to it if needed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Have an OpenShift Virtualization source provider and an OpenShift Virtualization destination provider. For more information, see <a href="#adding-source-provider_cnv">Adding an OpenShift Virtualization source provider</a> or <a href="#adding-source-provider_dest_cnv">Adding an OpenShift Virtualization destination provider</a>.</p>
</li>
<li>
<p>If you plan to create a <strong>Network map</strong> or a <strong>Storage map</strong> that will be used by more than one migration plan, create it in the <strong>Network maps</strong> or <strong>Storage maps</strong> page of the UI before you create a migration plan that uses that map.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Red Hat OpenShift web console, click <strong>Migration for Virtualization</strong> &gt; <strong>Migration plans</strong>.</p>
</li>
<li>
<p>Click <strong>Create plan</strong>.</p>
<div class="paragraph">
<p>The <strong>Create migration plan</strong> wizard opens.</p>
</div>
</li>
<li>
<p>On the <strong>General</strong> page, specify the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Plan name</strong>: Enter a name.</p>
</li>
<li>
<p><strong>Plan project</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Source provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target provider</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target project</strong>: Select from the list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Virtual machines</strong> page, select the virtual machines you want to migrate and click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Network map</strong> page, choose one of the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use an existing network map</strong>: Select an existing network map from the list.</p>
<div class="paragraph">
<p>These are network maps available for all plans, and therefore, they are <em>ownerless</em> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <em>owner</em> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you choose an existing map, be sure it has the same source provider and target provider as the ones you want to use in your plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Use a new network map</strong>: Allows you to create a new network map by supplying the following data. This map is attached to this plan, which will then be considered to be its owner. Maps that you create using this option are not available in the <strong>Use an existing network map</strong> option because each is created with an owner.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create an ownerless network map, which you and others can use for additional migration plans, in the <strong>Network Maps</strong> section of the UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source network</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target network</strong>: Select from the list.</p>
<div class="paragraph">
<p>If needed, click <strong>Add mapping</strong> to add another mapping.</p>
</div>
</li>
<li>
<p><strong>Network map name</strong>: Enter a name or let MTV automatically generate a name for the network map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Storage map</strong> page, choose one of the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Use an existing storage map</strong>: Select an existing storage map from the list.</p>
<div class="paragraph">
<p>These are storage maps available for all plans, and therefore, they are <em>ownerless</em> in terms of the system. If you select this option and choose a map, a copy of that map is attached to your plan, and your plan is the <em>owner</em> of that copy. Any changes you make to your copy do not affect the original plan or any copies that other users have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you choose an existing map, be sure it has the same source provider and the same target provider as the ones you want to use in your plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Use new storage map</strong>: Allows you to create one or two new storage maps by supplying the following data. These maps are attached to this plan, which is then their owner. For each map, specify the following. Maps that you create using this option are not available in the <strong>Use an existing storage map</strong> option because each is created with an owner.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create an ownerless storage map, which you and others can use for additional migration plans, in the <strong>Storage Maps</strong> section of the UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source storage</strong>: Select from the list.</p>
</li>
<li>
<p><strong>Target storage</strong>: Select from the list.</p>
<div class="paragraph">
<p>If needed, click <strong>Add mapping</strong> to add another mapping.</p>
</div>
</li>
<li>
<p><strong>Storage map name</strong>: Enter a name or let MTV automatically generate a name for the storage map.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Other settings (optional)</strong> page, you have the option to change the <strong>Transfer network</strong> of your migration plan.</p>
<div class="paragraph">
<p>The transfer network is the network used to transfer the VMs to OpenShift Virtualization. This is the default transfer network of the provider.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Verify that the transfer network is in the selected target project.</p>
</li>
<li>
<p>To choose a different transfer network, select a different transfer network from the list.</p>
</li>
<li>
<p>Optional: To configure another OpenShift network in the OpenShift web console, click <strong>Networking &gt; NetworkAttachmentDefinitions</strong>.</p>
<div class="paragraph">
<p>To learn more about the different types of networks OpenShift supports, see <a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html-single/networking/index#additional-networks-provided_understanding-multiple-networks">Additional Networks in OpenShift Container Platform</a>.</p>
</div>
</li>
<li>
<p>To adjust the maximum transmission unit (MTU) of the OpenShift transfer network, you must also change the MTU of the VMware migration network. For more information, see <a href="#selecting-migration-network-for-vmware-source-provider_vmware">Selecting a migration network for a VMware source provider</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Hooks (optional)</strong> page, you can add a pre-migration hook, a post-migration hook, or both types of migration hooks. All are optional.</p>
</li>
<li>
<p>To add a hook, select the appropriate <strong>Enable hook</strong> checkbox.</p>
</li>
<li>
<p>Enter the <strong>Hook runner image</strong>.</p>
</li>
<li>
<p>Enter the <strong>Ansible playbook</strong> of the hook in the window.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You cannot include more than one pre-migration hook or more than one post-migration hook in a migration plan.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review and Create</strong> page, review the information displayed.</p>
</li>
<li>
<p>Edit any item by doing the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click its <strong>Edit step</strong> link.</p>
<div class="paragraph">
<p>The wizard opens to the page on which you defined the item.</p>
</div>
</li>
<li>
<p>Edit the item.</p>
</li>
<li>
<p>Either click <strong>Next</strong> to advance to the next page of the wizard, or click <strong>Skip to review</strong> to return directly to the <strong>Review and create</strong> page.</p>
</li>
</ol>
</div>
</li>
<li>
<p>When you finish reviewing the details of the plan, click <strong>Create plan</strong>. MTV validates your plan.</p>
<div class="paragraph">
<p>When your plan is validated, the <strong>Plan details</strong> page for your plan opens in the <strong>Details</strong> tab.</p>
</div>
</li>
<li>
<p>In addition to listing details based on your entries in the wizard, the <strong>Plan details</strong> tab includes the following two sections after the details of the plan:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Migration history</strong>: Details about successful and unsuccessful attempts to run the plan</p>
</li>
<li>
<p><strong>Conditions</strong>: Any changes that need to be made to the plan so that it can run successfully</p>
</li>
</ul>
</div>
</li>
<li>
<p>When you have fixed all conditions listed, you can run your plan from the <strong>Plans</strong> page.</p>
<div class="paragraph">
<p>The <strong>Plan details</strong> page also includes five additional tabs, which are described in the table that follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Tabs of the Plan details page</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">YAML</th>
<th class="tableblock halign-left valign-top">Virtual Machines</th>
<th class="tableblock halign-left valign-top">Resources</th>
<th class="tableblock halign-left valign-top">Mappings</th>
<th class="tableblock halign-left valign-top">Hooks</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editable YAML <code>Plan</code> manifest based on your plan&#8217;s details including source provider, network and storage maps, VMs, and any issues with your VMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VMs the plan migrates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calculated resources: VMs, CPUs, and total memory for both total VMs and running VMs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Editable specification of the network and storage maps used by your plan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updatable specification of the hooks used by your plan, if any</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Remote migration: Target environment that does not have MTV installed. Migration to a remote environment using CDI.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-16 15:40:04 +0100
</div>
</div>
</body>
</html>